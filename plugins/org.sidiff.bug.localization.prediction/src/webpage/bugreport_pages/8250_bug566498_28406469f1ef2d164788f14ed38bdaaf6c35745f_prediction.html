<html>

<style>
html{
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ;
    font-size: 17px;
    display: table;
}
table,th,td {
  border: 1px solid black;
  width: 1200;
  text-align:justify;
  word-break:break-all;
}

th{
background-color: lightskyblue;
font-size: 16px;
border: none;
text-align:left;
}

td{
background-color: #d5e3c8;
font-size: 14px;
}

.container {
  position: relative;
  text-align:center;
  padding-top: 70%;
}

.responsive-iframe {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  width: 100%;
  height: 100%;
  border: 2px solid #73AD21;
}

</style>
<body>

<h2>Bug report Information</h2>
<table>

    <th colspan="2"> Bug Report </th>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Bug Report Number </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 566498 </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Summary </td>
        <td  style="width: 80%; background-color:#f7fff0;"> UI Freezes in Java editor after switching compile target level from 1.8 to 11 </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Creation Time </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 2020-08-29T08:56:54Z </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Status </td>
        <td  style="width: 80%; background-color:#f7fff0;"> RESOLVED </td>
    </tr>

    <th colspan="2"> Bug Fix </th>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Bugfix Commit </td>
        <td  style="width: 80%; background-color:#f7fff0;"> Bug 567436 - speed up NameLookup.isPackage if possible

Avoid redundant join+split of package name String array.

Change-Id: I66d3e4fa44784dc2e81ecb76b83a742b62a37aea
Signed-off-by: Michael Haubenwallner <michael.haubenwallner@ssi-schaefer.com> </td>
    </tr>
    <tr>
        <td  tyle="width: 20%; background-color:#d5e3c8;"> Bugfix Time </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 2020-10-02T08:39:03Z </td>
    </tr>
    </table>
<table>

<th colspan="2"> Ranked List of Class Diagrams </th>

<tr>
<td  style="width: 20%; font-size: 10px; background-color:#d5e3c8">

            <ul>
                <li style="font-weight: bold;"> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JModPackageFragmentRoot; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> FormatterMassiveRegressionTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JavaModelManagerTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> DatabaseRef; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JavaPDOM; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JavaIndex; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ClasspathJmod; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Database; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Indexer; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Util; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> CompilationUnitHelper; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JavaBuilder; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ReconcileFilerImpl; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> RunAllJava11Tests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ModuleUtil; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> INameEnvironmentExtension; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Database; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTConverterJavadocTest_15; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> NullReferenceImplTests~Generator; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JavaSearchNameEnvironment; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> TestUtil; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> FileSystemUtil; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> BuildJarIndex; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> TestingEnvironment; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> APIDocumentationTests$JavaCoreJavadocAnalyzer; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> IndexSelector; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> EclipseFileManager; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> NameEnvironmentWithProgress; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> CompilationUnitResolver$IntArrayList; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> IDOMFactory; </a> </li>
            </ul>   
            
</td>
<td  rowspan="30" style="width: 80%;  background-color:#d5e3c8"> 
    <div class="container">
    <iframe class="responsive-iframe" src="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" name="myIframe">
        <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html">SELFHTML</a>
    </iframe>
    </div>
</td>
</tr>
</table>
<table>

<th colspan="2"> Ranked List of Classifiers </th>

                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/JModPackageFragmentRoot; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/formatter/FormatterMassiveRegressionTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/model/JavaModelManagerTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/nd/DatabaseRef; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/pdom/java/JavaPDOM; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/nd/java/JavaIndex; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/model/AbstractJavaModelTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/batch/ClasspathJmod; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/JavaModel; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/nd/db/Database; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/JavaProject; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/pdom/indexer/Indexer; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/util/Util; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/nd/indexer/ClassFileToIndexConverter; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.apt.core/Lorg/eclipse/jdt/apt/core/internal/generatedfile/CompilationUnitHelper; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/builder/JavaBuilder; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/builder/ModuleInfoBuilder; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.apt.core/Lorg/eclipse/jdt/apt/core/internal/env/ReconcileFilerImpl; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/pdom/indexer/ClassFileToIndexConverter; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/ModuleUpdater; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/model/ModuleBuilderTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/model/ModelTestsUtil; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/RunAllJava11Tests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/builder/BuildNotifier; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/RunAllJava8Tests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/builder/ClasspathJrt; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/util/ModuleUtil; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/INameEnvironmentWithProgress; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/batch/FileSystem; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/env/INameEnvironmentExtension; </td>
                </tr>

                </table>
<table>

<th colspan="2"> Discussion </th>

        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-08-29T08:56:54Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Created attachment 283988
sample freeze log

After switching compiler target from 1.8 to 11 we are seeing a huge performance degradation in Eclipse across our entire user base. Switching to a different branch, which sill uses 1.8 target level improves the situation.

Most of those performance issues become noticeable through UI freezes or error messages about completion processors taking too long to respond.


Attached is the log with UI freeze stack samples.


One particular method call that I see very often in different samples is this one:
> oej.internal.compiler.env.IModuleAwareNameEnvironment.getUniqueModulesDeclaringPackage(IModuleAwareNameEnvironment.java:113)

Because the switch of target level from 1.8 to 11 involves adding modules I wonder if this has been profiled with large number of projects and deep dependency graphs before.

Also, the samples show quite a bit of contention around JavaModelManager, i.e. quite a few threads blocked by waiting on this one.

I'm sharing this for broader analysis. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-08-29T19:45:53Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gunnar, which exact Eclipse version is used? 4.17 is not released yet.

With performance degradation du you mean - compilation in the IDE, or editing, or searching?

We have done a lot of performance validation while transition from Java 8 to 11 *runtime*, but we did it other way around - we first switched the runtime, found few regressions in 11 runtime (Java developers work on fixing them), and now  evaluating the switch of the compilation target to 11.

On the mailing list you've mentioned that you run on Java 8 but compile to Java 11 level - if you want to compile against 11 anyway, haven't you tried to run on Java 11, does this improve anything? Hint: it could be surprising, and may be not what you would expect, but it really depends on your workload. Make sure you don't use G1 GC for your IDE, at least not with default settings, for compilation (throughput) tasks is G1 not the right choice and must be extra tuned.

Also using more than 31GB of heap will slowdown your IDE additionally, because this will disable compressed oops and add an extra pressure on the GC. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-08-30T09:39:39Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Andrey Loskutov from comment #1)
> Gunnar, which exact Eclipse version is used? 4.17 is not released yet.

We've seen it on 4.11-4.16. We are upgrading everyone to 4.16 but it's not helping.

> With performance degradation du you mean - compilation in the IDE, or
> editing, or searching?

It's mostly editing where the degradation is noticeable because of the spinning wheel and completion processor timeouts.


> We have done a lot of performance validation while transition from Java 8 to
> 11 *runtime*, but we did it other way around - we first switched the
> runtime, found few regressions in 11 runtime (Java developers work on fixing
> them), and now  evaluating the switch of the compilation target to 11.

This approach is similar to our code base. It's using Java 11 for runtime quite a while now. We just now completed switching compilation target to Java 11. For a full build in Maven with JDT compiler the performance impact was about 10-15%. But this also involved a couple of version jumps on the compiler side. We were on an older version for quite some time.

> On the mailing list you've mentioned that you run on Java 8 but compile to
> Java 11 level - if you want to compile against 11 anyway, haven't you tried
> to run on Java 11, does this improve anything? 

Eclipse is running with OpenJDK 1.8.0_212.
JVM for the code base is OpenJDK 11.

> Hint: it could be surprising,
> and may be not what you would expect, but it really depends on your
> workload. Make sure you don't use G1 GC for your IDE, at least not with
> default settings, for compilation (throughput) tasks is G1 not the right
> choice and must be extra tuned.
> 
> Also using more than 31GB of heap will slowdown your IDE additionally,
> because this will disable compressed oops and add an extra pressure on the
> GC.

This is the tuning information I'm looking for. AFAIK G1 is the default GC in JDK 11. Thus, when rolling out JDK 11 for the IDE, shall we use a different GC? Which one and what settings?

Currently we run with:
-Xverify:none
-XX:+UseStringDeduplication
-XX:+DisableExplicitGC
-XX:+ParallelRefProcEnabled
-XX:+AggressiveOpts
-Dorg.eclipse.jdt.core.javamodelcache.ratio=1.5
-Dorg.eclipse.jdt.core.javamodelcache.jartyperatio=4 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-08-31T11:03:58Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Gunnar Wagenknecht from comment #2)
> (In reply to Andrey Loskutov from comment #1)
> > Gunnar, which exact Eclipse version is used? 4.17 is not released yet.
> 
> We've seen it on 4.11-4.16. We are upgrading everyone to 4.16 but it's not
> helping.
> 
> > With performance degradation du you mean - compilation in the IDE, or
> > editing, or searching?
> 
> It's mostly editing where the degradation is noticeable because of the
> spinning wheel and completion processor timeouts.

Please restore the Java Content Assist and Advanced Preference settings to your previous Eclipse version i.e. disable any additional proposal kinds, non-blocking completion etc. 

Also, disable Java Code Minings from Preferences if it's enabled for you.

See if this improves the editing and content assist situation. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-08-31T11:05:16Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Gunnar Wagenknecht from comment #0)
> One particular method call that I see very often in different samples is
> this one:
> > oej.internal.compiler.env.IModuleAwareNameEnvironment.getUniqueModulesDeclaringPackage(IModuleAwareNameEnvironment.java:113)
> 
> Because the switch of target level from 1.8 to 11 involves adding modules I
> wonder if this has been profiled with large number of projects and deep
> dependency graphs before.
> 
> Also, the samples show quite a bit of contention around JavaModelManager,
> i.e. quite a few threads blocked by waiting on this one.
...

(In reply to Gunnar Wagenknecht from comment #2)
> This is the tuning information I'm looking for. AFAIK G1 is the default GC
> in JDK 11. Thus, when rolling out JDK 11 for the IDE, shall we use a
> different GC? Which one and what settings?
> 
> Currently we run with:
> -Xverify:none
> -XX:+UseStringDeduplication
> -XX:+DisableExplicitGC
> -XX:+ParallelRefProcEnabled
> -XX:+AggressiveOpts
> -Dorg.eclipse.jdt.core.javamodelcache.ratio=1.5
> -Dorg.eclipse.jdt.core.javamodelcache.jartyperatio=4

Moving to Core to check the above. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-01T14:49:57Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Created attachment 284013
JFR Method Profiling comparing 11 vs 8 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-01T14:50:23Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Created attachment 284014
JFR Memory comparing 11 vs 8 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-01T15:01:32Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Andrey Loskutov from comment #1)
> With performance degradation du you mean - compilation in the IDE, or
> editing, or searching?

I've attached two screenshots comparing JFR recordings for two different workspaces. The workspace are setup identically. However, one is using 11 as compilation target for the Java projects and the other is using 8. The patterns are very different. I'm not sure yet what conclusions to draw from them. I'm just sharing them here for visibility and insights from anyone interested in the topic.


The test scenario performed while capturing both recordings was the same, i.e. open a type (same type) and invoke code assist.

Some notes:
- the workspace targeting 8 for compilation was much more snappier; the recording was therefore much shorter
- memory data is polluted by JFR taking more thread dumps in the 11 session due to its much longer runtime
- Hashtable.get < LRUCache < ... < PackageFragment.exist < ... < IModuleAwareNameEnvironment.getUniqueModulesDeclaringPackage ... really shows up in a lot of samples (also when I did some different investigations with YourKit and in UI Freeze samples) </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-24T16:01:39Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Created attachment 284252
Call Tree of Code Completion taking > 5 seconds

I'm still investigating this one. One example scenario I'm following is code completion. It's taking > 5 seconds after invoking Code Assist till the view is populated with results. Even local variables take that long. Code Assist is set to defaults.

Attached is a call tree captured with YourKit. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-24T16:02:28Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Created attachment 284253
Call Tree of Code Completion taking > 5 seconds (sample #2)

Second sample of the same operation, also taking >5 seconds </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-24T17:06:38Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Gunnar Wagenknecht from comment #8)
> 
> I'm still investigating this one. One example scenario I'm following is code
> completion. It's taking > 5 seconds after invoking Code Assist till the view
> is populated with results. Even local variables take that long.

I'm observing the same issue. I'll keep my eyes open for next time it happens, and see if I can add more useful information to the analysis. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-24T18:12:49Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Created attachment 284257
Call Tree of Code Completion taking > 5 seconds (sample #2, more detailed)

So here is a more detailed view of https://bugs.eclipse.org/bugs/attachment.cgi?id=284253. Again, this is just for 1 Code Completion. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-24T18:30:12Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Created attachment 284258
UI Freeze during Save

Another thing that is also slow and reproducible consistently with *any* class are UI Freezes when saving a file. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-24T20:18:09Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> After briefly scanning some call chains in attachments, those seem to point to one main factor causing intrinsic complexity (in case those are not obvious to you):

- to look up a type in Java 9+ requires do search *all* modules read by the current module, to find out if they have a package of the given name. This is needed so we can report violation of the requirement of unique visibility.

This motivates much of the complexity around getUniqueModulesDeclaringPackage().

Many classes involved already cache that information which requires access to file system / zipfile content. It's possible we missed some spots worth caching, but I wouldn't consider this the most likely road to speedups.

Thinking out of the box, perhaps the most drastic savings could be done by implementing a new compiler mode in which checks for unique visibility are omitted (could be good enough for many UI use cases).

Unfortunately, I cannot say for sure that this would help significantly, nor do I have a quick idea how this could be implemented without butchering the existing compiler architecture.


Other complications in this area include:
* The structure around SplitPackageBinding is a bit tricky (see bug 547181 for the full story)
* At some point package existence needs to be checked by searching for an actual *package statement* by the given name within any given *compilation unit*.

But I see no indications that these are hotspots in the attached stacks. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-25T16:07:57Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/169915 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-25T16:08:02Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/169916 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-25T16:08:07Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/169917 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-25T19:13:31Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/169924 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-27T17:58:06Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Created attachment 284296
OPENING class file module-info.class log

Stephan et all,

Here is something I don't understand. I'm running with tracing to gather some additional information. In a recent run I enabled cache tracing as I enhanced it with additional information.

According to the attached log, something is off with module-info.class files.

A lot of interactions in the UI trigger the attached log output. For example, opening a .class file with F3 or even just closing a .class file. 

Why is module-info.class opened so often? Especially since it's checking JDK modules. Shouldn't those be totally static and entirely cached? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-27T20:44:29Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Gunnar Wagenknecht from comment #18)
> Why is module-info.class opened so often? Especially since it's checking JDK
> modules. Shouldn't those be totally static and entirely cached?

Did you notice that these are 37 different files (from different modules), where no file is requested more than twice in this log file?

OTOH, I'm surprised indeed to see ASTs being requested for those. Now it would help to see corresponding stack traces: what exactly requests these ASTs? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-28T10:39:07Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Stephan Herrmann from comment #19)
> (In reply to Gunnar Wagenknecht from comment #18)
> > Why is module-info.class opened so often? Especially since it's checking JDK
> > modules. Shouldn't those be totally static and entirely cached?
> 
> Did you notice that these are 37 different files (from different modules),
> where no file is requested more than twice in this log file?

Stephan, I posted just a snipped of the log. This output for 37 files is repeated *every* time something happens. They are clearly not coming out of the cache.

I found a fix for this one and will provide a Gerrit shortly:
https://github.com/eclipseguru/eclipse.jdt.core/commit/7ab84abe55d4271e60eeb17beb4490b9d8735ce2


> OTOH, I'm surprised indeed to see ASTs being requested for those. Now it
> would help to see corresponding stack traces: what exactly requests these
> ASTs?

This can be triggered by anything that ends up calling NameLookup#isPackage (with module context). It performs a brutal #exist check, which triggers opening of the Openable, which triggers parsing.

For example, closing a .class file, which triggers the background reconciling.


But fixing this only reduced a few dozen of IO operations.

Time is lost (in my example) due to the sheer size of the classpath:

BUILDING NameLoopkup
  -> pkg roots size: 5862
  -> pkgs size: 56835
  -> working copy size: 1
  -> spent: 10ms

 
Event: org.eclipse.jdt.core/perf/completion Blame: org.eclipse.jdt.internal.core.CompilationUnit Context: ....java
Run count: 1
Duration (ms): 3982 (3982 average)

TIME SPENT in SearchableEnvironment#getModulesDeclaringPackage.......3696ms

TIME SPENT in NameLoopkup#seekTypesInSourcePackage...................0ms
TIME SPENT in NameLoopkup#seekTypesInBinaryPackage...................31ms
TIME SPENT in NameLoopkup#seekTypesInType............................0ms
TIME SPENT in NameLoopkup#seekModule.................................21ms
TIME SPENT in NameLoopkup#seekModuleAwarePartialPackageFragments.....0ms
TIME SPENT in NameLoopkup#seekPackageFragments.......................2ms
TIME SPENT in NameLoopkup#seekPackageFragmentsWithModuleContext......30ms
TIME SPENT in NameLoopkup#isPackage(pkg,moduleCtx)...................3439ms



So, SearchableEnvironment#getModulesDeclaringPackage is O(n), which in my case is a big deal. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-28T12:33:25Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Gunnar Wagenknecht from comment #20)
> (In reply to Stephan Herrmann from comment #19)
> > OTOH, I'm surprised indeed to see ASTs being requested for those. Now it
> > would help to see corresponding stack traces: what exactly requests these
> > ASTs?
> 
> This can be triggered by anything that ends up calling NameLookup#isPackage
> (with module context). It performs a brutal #exist check, which triggers
> opening of the Openable, which triggers parsing.

Sorry, I was misled by the heading "Requesting Java AST from selection". At second look, this only indicates that the log statement is from a thread currently creating *some* AST. We actually don't request public AST of module-info.

When you say "parsing" do you really mean parsing *module-info.java*? That would still be strange, since we are starting from the class file *module-info.class*. Or is all this about reading and interpreting byte code? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-28T13:45:32Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Stephan Herrmann from comment #21)
 When you say "parsing" do you really mean parsing *module-info.java*? That
> would still be strange, since we are starting from the class file
> *module-info.class*. Or is all this about reading and interpreting byte code?

No, in that context not at all. All the code wants to do is collect all the modules a package is defined in. It does it by checking a package fragment exists. The old implementation called #openWhenClosed (ignoring the JavaModelCache) which always triggered #buildStructure of the ModuleClassFile. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-28T13:48:32Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Gunnar Wagenknecht from comment #20)

> Event: org.eclipse.jdt.core/perf/completion Blame:
> org.eclipse.jdt.internal.core.CompilationUnit Context: ....java
> Run count: 1
> Duration (ms): 3982 (3982 average)
> 
> TIME SPENT in SearchableEnvironment#getModulesDeclaringPackage.......3696ms
> 
> TIME SPENT in NameLoopkup#seekTypesInSourcePackage...................0ms
> TIME SPENT in NameLoopkup#seekTypesInBinaryPackage...................31ms
> TIME SPENT in NameLoopkup#seekTypesInType............................0ms
> TIME SPENT in NameLoopkup#seekModule.................................21ms
> TIME SPENT in NameLoopkup#seekModuleAwarePartialPackageFragments.....0ms
> TIME SPENT in NameLoopkup#seekPackageFragments.......................2ms
> TIME SPENT in NameLoopkup#seekPackageFragmentsWithModuleContext......30ms
> TIME SPENT in NameLoopkup#isPackage(pkg,moduleCtx)...................3439ms


*happy dance*

BUILDING NameLoopkup
-> pkg roots size: 5862
-> pkgs size: 56835
-> working copy size: 2
-> spent: 9ms

Event: org.eclipse.jdt.core/perf/completion Blame: org.eclipse.jdt.internal.core.CompilationUnit Context: ....java
Run count: 1
Duration (ms): 194 (194 average)

TIME SPENT in SearchableEnvironment#getModulesDeclaringPackage.......26ms
TIME SPENT in NameLoopkup#seekTypesInSourcePackage...................0ms
TIME SPENT in NameLoopkup#seekTypesInBinaryPackage...................4ms
TIME SPENT in NameLoopkup#seekTypesInType............................0ms
TIME SPENT in NameLoopkup#seekModule.................................20ms
TIME SPENT in NameLoopkup#seekModuleAwarePartialPackageFragments.....0ms
TIME SPENT in NameLoopkup#seekPackageFragments.......................5ms
TIME SPENT in NameLoopkup#seekPackageFragmentsWithModuleContext......38ms
TIME SPENT in NameLoopkup#isPackage(pkg,moduleCtx)...................19ms

Bonus: no extra caching needed for this particular case. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-29T13:50:18Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170026 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-29T13:50:24Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170027 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-29T13:50:32Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170028 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-29T13:50:38Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170031 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-29T13:50:42Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170032 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-29T13:50:48Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170033 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-29T13:50:54Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170034 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-29T13:50:59Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170035 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-30T10:07:03Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170088 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-30T10:14:19Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170089 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-30T11:54:57Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170096 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-30T11:55:10Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170097 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-30T12:27:44Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170100 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-09-30T18:16:31Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170127 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-10-01T14:41:24Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170169 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-10-02T10:58:47Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170236 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-10-02T22:12:22Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170035 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=93e15ea4877c4bd43eda804c8573682c4d5d3738 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-10-05T08:33:47Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Eclipse Genie from comment #40)
> Gerrit change https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170035 was
> merged to [master].
> Commit:
> http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/
> ?id=93e15ea4877c4bd43eda804c8573682c4d5d3738

Andrey/Gunnar, Is there some steps to verify this performance improvement? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-10-05T09:12:08Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Vikas Chandra from comment #41)
> Andrey/Gunnar, Is there some steps to verify this performance improvement?

You would need a project with 5000+ jars on its classpath. As you can see from the NameLookup stats printed:

BUILDING NameLoopkup
  -> pkg roots size: 5862
  -> pkgs size: 56835

I started extending Andrey`s project generator but did not get very far.
https://github.com/eclipseguru/java-project-generator/commit/a7795cacd42b0072dd1d6e4380a2442c98880f60 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-10-30T09:30:11Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170236 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=f1c0f2f95158ce4f2e31aa227426aaeeb02164b8 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-11-02T04:26:44Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170031 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=dc66657375b624ab8472ee46037788670cc44d9e </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-11-02T05:59:44Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170032 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=5fa556577baf0d0640f58b1833b62d8224ad1d2a </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-11-02T08:45:33Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170127 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=b3cc25e26a9b327ef6e79fbec3cde4d4fbeb60fc </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-11-06T10:06:29Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170097 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=610bf23fde9927ec62295d8386d1ae05491efad7 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-11-18T00:44:05Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/170169 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=e33222743466b756c14b68fa3b21b823f47ce3ff </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-11-27T09:12:39Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/c/jdt/eclipse.jdt.core/+/172918 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-11-27T09:31:17Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> @Gunnar: please create dedicated bugs for pending gerrits that are not merged yet (if you plan to continue working on them).

Please avoid in the future to have a "common" bug for largely unrelated JDT changes, try to create bugs per concrete issue identified in JDT. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-11-30T13:48:58Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Andrey Loskutov from comment #50)
> @Gunnar: please create dedicated bugs for pending gerrits that are not
> merged yet (if you plan to continue working on them).

That wasn't me. :) 

> Please avoid in the future to have a "common" bug for largely unrelated JDT
> changes, try to create bugs per concrete issue identified in JDT.

I'm not sure about the benefit of having a bug granularity matching the commits/reviews that is approaching 1:1. That sounds more like paperwork than being helpful. But I can be convinced otherwise. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2020-12-01T03:39:56Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Gunnar Wagenknecht from comment #51)

> > Please avoid in the future to have a "common" bug for largely unrelated JDT
> > changes, try to create bugs per concrete issue identified in JDT.
> 
> I'm not sure about the benefit of having a bug granularity matching the
> commits/reviews that is approaching 1:1. That sounds more like paperwork
> than being helpful. But I can be convinced otherwise.

@Gunnar - It helps to have a 1-1 corresponding to bug/commit especially if we are tracking down a problematic commit to be identified / reverted. Again, the history in the code helps us to navigate more easily with a 1-1 mapping.

About related issues, what we generally do is to create a top level bug and then create child bugs for the individual issues (with the blocker as the parent bug). This may cause an increase in the number of small bugs but that is fine. my 2 cents. </td> </tr>
        </table>
</body>
</html>
