<html>

<style>
html{
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ;
    font-size: 17px;
    display: table;
}
table,th,td {
  border: 1px solid black;
  width: 1200;
  text-align:justify;
  word-break:break-all;
}

th{
background-color: lightskyblue;
font-size: 16px;
border: none;
text-align:left;
}

td{
background-color: #d5e3c8;
font-size: 14px;
}

.container {
  position: relative;
  text-align:center;
  padding-top: 70%;
}

.responsive-iframe {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  width: 100%;
  height: 100%;
  border: 2px solid #73AD21;
}

</style>
<body>

<h2>Bug report Information</h2>
<table>

    <th colspan="2"> Bug Report </th>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Bug Report Number </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 531536 </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Summary </td>
        <td  style="width: 80%; background-color:#f7fff0;"> Another NPE in Annotation.isTypeUseCompatible() due to unhappy re-entrance </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Creation Time </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 2018-02-22T12:28:21Z </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Status </td>
        <td  style="width: 80%; background-color:#f7fff0;"> VERIFIED </td>
    </tr>

    <th colspan="2"> Bug Fix </th>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Bugfix Commit </td>
        <td  style="width: 80%; background-color:#f7fff0;"> Bug 534466 - [1.8] ecj uses varargs method reference to disambiguate
overloading

Change-Id: I6f35ae33b55ffbf938368cf673c9d231aa4ca7ed
 </td>
    </tr>
    <tr>
        <td  tyle="width: 20%; background-color:#d5e3c8;"> Bugfix Time </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 2019-09-15T16:25:51Z </td>
    </tr>
    </table>
<table>

<th colspan="2"> Ranked List of Class Diagrams </th>

<tr>
<td  style="width: 20%; font-size: 10px; background-color:#d5e3c8">

            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JDTCompilerAdapter; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTConverter; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> LambdaFactory; </a> </li>
            </ul>   
            
            <ul>
                <li style="font-weight: bold;"> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> MemberTypeBinding; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTConverterBugsTestJLS8; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> GenericsRegressionTest_9; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> LambdaExpression; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Factory; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> RegressionTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> BindingMap; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ModuleBuilderTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> IDOMFactory; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> IProblem; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> FieldInitsFakingFlowContext; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTRewrite; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTBasedFieldDeclarationImpl; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> AbstractRegressionTest$JavacCompiler; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Factory; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Parser; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> FinalRoundTestTrigger; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> InvocationSite$EmptyWithAstNode; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> NonNull; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> DatabaseRef; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> SelectionParser; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> CompilerToolTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> CompilerToolJava9Tests$CompilerBuilder; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> BindingToIndexConverter; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> AbstractImageBuilder; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> CompletionParser; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> IndexBinaryType; </a> </li>
            </ul>   
            
</td>
<td  rowspan="30" style="width: 80%;  background-color:#d5e3c8"> 
    <div class="container">
    <iframe class="responsive-iframe" src="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" name="myIframe">
        <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html">SELFHTML</a>
    </iframe>
    </div>
</td>
</tr>
</table>
<table>

<th colspan="2"> Ranked List of Classifiers </th>

                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/JDTCompilerAdapter; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/dom/ASTConverter; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/LambdaFactory; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/lookup/MemberTypeBinding; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterBugsTestJLS8; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; font-weight: bold; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/lookup/ParameterizedTypeBinding; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/GenericsRegressionTest_9; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/LambdaExpression; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/ast/LambdaExpression; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/lookup/ImplicitNullAnnotationVerifier; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.compiler.apt/Lorg/eclipse/jdt/internal/compiler/apt/model/Factory; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/JavadocTestOptions; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterBugsTestJLS3; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverter9Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/GenericsRegressionTest_1_8; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.apt.tests/Lorg/eclipse/jdt/apt/tests/RegressionTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/hierarchy/BindingMap; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/model/ModuleBuilderTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/dom/TypeBinding; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/jdom/IDOMFactory; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/compiler/IProblem; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/lookup/ConstraintExpressionFormula; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/flow/FieldInitsFakingFlowContext; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/dom/rewrite/ASTRewrite; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterTestAST3_2; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/ast/PostfixExpression; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/lookup/MethodVerifier15; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterBugsTestJLS4; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.apt.core/Lorg/eclipse/jdt/apt/core/internal/declaration/ASTBasedFieldDeclarationImpl; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/LambdaRegressionTest; </td>
                </tr>

                </table>
<table>

<th colspan="2"> Discussion </th>

        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-02-22T12:28:21Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Alex Panchenko from bug 490698 comment #16)
> Happens in Neon too.
> 
> // SOURCE
> 
> package foo.bar;
> 
> import static java.lang.annotation.ElementType.FIELD;
> import static java.lang.annotation.RetentionPolicy.RUNTIME;
> 
> import java.lang.annotation.Retention;
> import java.lang.annotation.Target;
> import java.util.function.Predicate;
> 
> public class AnnotationError<T> {
> 
> 	public enum P {
> 		AAA
> 	}
> 
> 	@Target(FIELD)
> 	@Retention(RUNTIME)
> 	public @interface A {
> 		P value();
> 	}
> 
> 	@Target(FIELD)
> 	@Retention(RUNTIME)
> 	public @interface FF {
> 	}
> 
> 	public static class Bool extends AnnotationError<Boolean> {
> 	}
> 
> 	@A(P.AAA)
> 	@FF
> 	public static final AnnotationError.Bool FOO = new AnnotationError.Bool();
> }
> 
> // STACK TRACE
> 
> java.lang.NullPointerException: null
>     at
> org.eclipse.jdt.internal.compiler.ast.Annotation.
> isTypeUseCompatible(Annotation.java:1153)
>     at
> org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> resolveTypeFor(SourceTypeBinding.java:1790)
>     at
> org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> fields(SourceTypeBinding.java:934)
>     at
> org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> fields(ParameterizedTypeBinding.java:462)
>     at
> org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> getField(ParameterizedTypeBinding.java:647)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:1338)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:1284)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.getBinding(Scope.java:2014)
>     at
> org.eclipse.jdt.internal.compiler.lookup.BlockScope.getBinding(BlockScope.
> java:485)
>     at
> org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.
> resolveType(QualifiedNameReference.java:999)
>     at
> org.eclipse.jdt.internal.compiler.ast.MemberValuePair.
> resolveTypeExpecting(MemberValuePair.java:89)
>     at
> org.eclipse.jdt.internal.compiler.ast.Annotation.resolveType(Annotation.java:
> 829)
>     at
> org.eclipse.jdt.internal.compiler.ast.ASTNode.resolveAnnotations(ASTNode.
> java:837)
>     at
> org.eclipse.jdt.internal.compiler.ast.ASTNode.resolveAnnotations(ASTNode.
> java:705)
>     at
> org.eclipse.jdt.internal.compiler.lookup.FieldBinding.
> getAnnotationTagBits(FieldBinding.java:312)
>     at
> org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> resolveTypeFor(SourceTypeBinding.java:1736)
>     at
> org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> fields(SourceTypeBinding.java:934)
>     at
> org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> fields(ParameterizedTypeBinding.java:462)
>     at
> org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> getField(ParameterizedTypeBinding.java:647)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:1338)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:1284)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.getBinding(Scope.java:2014)
>     at
> org.eclipse.jdt.internal.compiler.lookup.BlockScope.getBinding(BlockScope.
> java:485)
>     at
> org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.
> resolveType(QualifiedNameReference.java:999)
>     at
> org.eclipse.jdt.internal.compiler.ast.MemberValuePair.
> resolveTypeExpecting(MemberValuePair.java:89)
>     at
> org.eclipse.jdt.internal.compiler.ast.Annotation.resolveType(Annotation.java:
> 829)
>     at
> org.eclipse.jdt.internal.compiler.ast.ASTNode.resolveAnnotations(ASTNode.
> java:837)
>     at
> org.eclipse.jdt.internal.compiler.ast.ASTNode.resolveAnnotations(ASTNode.
> java:705)
>     at
> org.eclipse.jdt.internal.compiler.lookup.FieldBinding.
> getAnnotationTagBits(FieldBinding.java:312)
>     at
> org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> resolveTypeFor(SourceTypeBinding.java:1736)
>     at
> org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> fields(SourceTypeBinding.java:934)
>     at
> org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> fields(ParameterizedTypeBinding.java:462)
>     at
> org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> getField(ParameterizedTypeBinding.java:647)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:1338)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:1284)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.getBinding(Scope.java:2014)
>     at
> org.eclipse.jdt.internal.compiler.ast.SingleNameReference.
> resolveType(SingleNameReference.java:987)
>     at
> org.eclipse.jdt.internal.compiler.ast.MemberValuePair.
> resolveTypeExpecting(MemberValuePair.java:89)
>     at
> org.eclipse.jdt.internal.compiler.ast.Annotation.resolveType(Annotation.java:
> 829)
>     at
> org.eclipse.jdt.internal.compiler.ast.ASTNode.resolveAnnotations(ASTNode.
> java:837)
>     at
> org.eclipse.jdt.internal.compiler.ast.ASTNode.resolveAnnotations(ASTNode.
> java:705)
>     at
> org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> getAnnotationTagBits(SourceTypeBinding.java:1022)
>     at
> org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> getAnnotationTagBits(ParameterizedTypeBinding.java:533)
>     at
> org.eclipse.jdt.internal.compiler.ast.Annotation.
> isTypeUseCompatible(Annotation.java:1153)
>     at
> org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> resolveTypeFor(SourceTypeBinding.java:1790)
>     at
> org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> fields(SourceTypeBinding.java:934)
>     at
> org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> fields(ParameterizedTypeBinding.java:462)
>     at
> org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> getField(ParameterizedTypeBinding.java:647)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:1338)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:1284)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.getBinding(Scope.java:2014)
>     at
> org.eclipse.jdt.internal.compiler.lookup.BlockScope.getBinding(BlockScope.
> java:485)
>     at
> org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.
> resolveType(QualifiedNameReference.java:999)
>     at
> org.eclipse.jdt.internal.compiler.ast.MemberValuePair.
> resolveTypeExpecting(MemberValuePair.java:89)
>     at
> org.eclipse.jdt.internal.compiler.ast.Annotation.resolveType(Annotation.java:
> 829)
>     at
> org.eclipse.jdt.internal.compiler.ast.ASTNode.resolveAnnotations(ASTNode.
> java:837)
>     at
> org.eclipse.jdt.internal.compiler.ast.ASTNode.resolveAnnotations(ASTNode.
> java:705)
>     at
> org.eclipse.jdt.internal.compiler.lookup.FieldBinding.
> getAnnotationTagBits(FieldBinding.java:312)
>     at
> org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> resolveTypeFor(SourceTypeBinding.java:1736)
>     at
> org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> fields(SourceTypeBinding.java:934)
>     at
> org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> fields(ParameterizedTypeBinding.java:462)
>     at
> org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> getField(ParameterizedTypeBinding.java:647)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:1338)
>     at
> org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:1284)
>     at
> org.eclipse.jdt.internal.compiler.lookup.MethodScope.findField(MethodScope.
> java:417)
>     at
> org.eclipse.jdt.internal.compiler.lookup.BlockScope.getBinding(BlockScope.
> java:552)
>     at
> org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.
> resolveType(QualifiedNameReference.java:999)
>     at
> org.eclipse.jdt.internal.compiler.ast.MessageSend.resolveType(MessageSend.
> java:684)
>     at
> org.eclipse.jdt.internal.compiler.ast.ReturnStatement.
> resolve(ReturnStatement.java:342)
>     at org.eclipse.jdt.internal.compiler.ast.Block.resolve(Block.java:117)
>     at
> org.eclipse.jdt.internal.compiler.ast.IfStatement.resolve(IfStatement.java:
> 276)
>     at
> org.eclipse.jdt.internal.compiler.ast.IfStatement.resolve(IfStatement.java:
> 278)
>     at
> org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.
> resolveStatements(AbstractMethodDeclaration.java:634)
>     at
> org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.
> resolveStatements(MethodDeclaration.java:306)
>     at
> org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.
> resolve(AbstractMethodDeclaration.java:544)
>     at
> org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.
> resolve(TypeDeclaration.java:1195)
>     at
> org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.
> resolve(TypeDeclaration.java:1308)
>     at
> org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.
> resolve(CompilationUnitDeclaration.java:593)
>     at org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:867)
>     at
> org.eclipse.jdt.internal.compiler.ProcessTaskManager.run(ProcessTaskManager.
> java:141)
>     at java.lang.Thread.run(Thread.java:745)



(In reply to Stephan Herrmann from bug 490698 comment #18)
> (In reply to Alex Panchenko from bug 490698 comment #16)
> > Happens in Neon too.
> 
> Upon debugging I see that this case is different from comment 0 and comment
> 4. The new example finds an annotation without a resolved type, because of
> this unhappy re-entrance:
>  
> > java.lang.NullPointerException: null
> >     at
> > org.eclipse.jdt.internal.compiler.ast.Annotation.
> > isTypeUseCompatible(Annotation.java:1153)
> >     at
> > org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> > resolveTypeFor(SourceTypeBinding.java:1790)
> >     at
> > org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> > fields(SourceTypeBinding.java:934)
> >     at
> > org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> > fields(ParameterizedTypeBinding.java:462)
> >     at
> > org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.
> > getField(ParameterizedTypeBinding.java:647)
> >     at
> > org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:1338)
> >     at
> > org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:1284)
> >     at
> > org.eclipse.jdt.internal.compiler.lookup.Scope.getBinding(Scope.java:2014)
> >     at
> > org.eclipse.jdt.internal.compiler.lookup.BlockScope.getBinding(BlockScope.
> > java:485)
> >     at
> > org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.
> > resolveType(QualifiedNameReference.java:999)
> >     at
> > org.eclipse.jdt.internal.compiler.ast.MemberValuePair.
> > resolveTypeExpecting(MemberValuePair.java:89)
> >     at
> > org.eclipse.jdt.internal.compiler.ast.Annotation.resolveType(Annotation.java:
> > 829)
> >     at
> > org.eclipse.jdt.internal.compiler.ast.ASTNode.resolveAnnotations(ASTNode.
> > java:837)
> >     at
> > org.eclipse.jdt.internal.compiler.ast.ASTNode.resolveAnnotations(ASTNode.
> > java:705)
> >     at
> > org.eclipse.jdt.internal.compiler.lookup.FieldBinding.
> > getAnnotationTagBits(FieldBinding.java:312)
> >     at
> > org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> > resolveTypeFor(SourceTypeBinding.java:1736)
> >     at
> > org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.
> > fields(SourceTypeBinding.java:934)
> ...
> 
> 
> => fields() is invoked for the same STB that is already being processed.
> This probably is the root cause for the NPE here. Fixing this doesn't cover
> the other examples. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-02-22T12:33:54Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/117939 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-02-22T12:38:44Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Eclipse Genie from comment #1)
> New Gerrit change created: https://git.eclipse.org/r/117939

Failing test case </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-05-17T07:24:08Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> bulk move out of 4.8 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-08-10T13:20:17Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> It's still happening for me in Photon. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-09-15T18:17:51Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Patch set #2 brings a heuristic-based approach:

Whenever we lookup a field of a ParameterizedTypeBinding that has not completed building its fields, but when the underlying type's fields have been sorted at least, a quick peek into that sorted list may reveal that we don't have a name by that field and hence give an early return null;

In this particular case this avoids the unfortunate re-entrance. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-09-15T19:02:46Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/117939 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=6a8cee1126829229d648db4ae0e5a6b70a5d4f13 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-09-15T19:06:07Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Eclipse Genie from comment #6)
> Gerrit change https://git.eclipse.org/r/117939 was merged to [master].
> Commit:
> http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/
> ?id=6a8cee1126829229d648db4ae0e5a6b70a5d4f13

Released for 4.14 M1 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-10-09T10:26:12Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Verified for Eclipse Version: 2019-12 (4.14) M1 with  Build id: I20191008-1800 </td> </tr>
        </table>
</body>
</html>
