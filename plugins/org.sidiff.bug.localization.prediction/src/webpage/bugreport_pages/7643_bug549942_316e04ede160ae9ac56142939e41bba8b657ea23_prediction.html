<html>

<style>
html{
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ;
    font-size: 17px;
    display: table;
}
table,th,td {
  border: 1px solid black;
  width: 1200;
  text-align:justify;
  word-break:break-all;
}

th{
background-color: lightskyblue;
font-size: 16px;
border: none;
text-align:left;
}

td{
background-color: #d5e3c8;
font-size: 14px;
}

.container {
  position: relative;
  text-align:center;
  padding-top: 70%;
}

.responsive-iframe {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  width: 100%;
  height: 100%;
  border: 2px solid #73AD21;
}

</style>
<body>

<h2>Bug report Information</h2>
<table>

    <th colspan="2"> Bug Report </th>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Bug Report Number </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 549942 </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Summary </td>
        <td  style="width: 80%; background-color:#f7fff0;"> Impossible to compile CDT 2019-09 using Eclipse 2019-09 M2 with JDT 3.18.100.v20190801-0600 </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Creation Time </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 2019-08-09T16:36:56Z </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Status </td>
        <td  style="width: 80%; background-color:#f7fff0;"> VERIFIED </td>
    </tr>

    <th colspan="2"> Bug Fix </th>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Bugfix Commit </td>
        <td  style="width: 80%; background-color:#f7fff0;"> Bug 212867 - [formatter]: Remove blank lines after '{' and before '}'

Change-Id: I7dc124d6484490d5d69c887c38962a7047d1d0e6
Signed-off-by: Mateusz Matela <mateusz.matela@gmail.com> </td>
    </tr>
    <tr>
        <td  tyle="width: 20%; background-color:#d5e3c8;"> Bugfix Time </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 2019-08-10T20:48:46Z </td>
    </tr>
    </table>
<table>

<th colspan="2"> Ranked List of Class Diagrams </th>

<tr>
<td  style="width: 20%; font-size: 10px; background-color:#d5e3c8">

            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTConverterBugsTestJLS4; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTConverter; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> GenericsRegressionTest_1_8; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JDTCompilerAdapter; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> MessageSend; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> CompilerInvocationTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Util; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Nd; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ProblemReporter; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTRewritingTypeDeclTest; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTRewriteAnalyzer; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> CompletionTests2; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> MemberTypeBinding; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> EclipseFileManager; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ClasspathUtil; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> BTreeExpensiveTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> FormatterJSR308Tests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> RunOnlyJava8Tests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Util; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JavaProject; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> AbstractRegressionTest$JavacCompiler; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> StructDef; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Database; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> StandAloneASTParserTest; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> IDOMCompilationUnit; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> CompilerToolJava9Tests$CompilerBuilder; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> RegressionTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> NaiveASTFlattener; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> TryFlowContext; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> AptConfig$ProcessorOptionsParser; </a> </li>
            </ul>   
            
</td>
<td  rowspan="30" style="width: 80%;  background-color:#d5e3c8"> 
    <div class="container">
    <iframe class="responsive-iframe" src="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" name="myIframe">
        <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html">SELFHTML</a>
    </iframe>
    </div>
</td>
</tr>
</table>
<table>

<th colspan="2"> Ranked List of Classifiers </th>

                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterBugsTestJLS4; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterJavadocTest; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverter9Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/dom/ASTConverter; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterTest; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterBugsTestJLS3; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverter17Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/GenericsRegressionTest_1_8; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/JDTCompilerAdapter; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterTestAST4_2; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterAST8Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverter11Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTModelBridgeTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/JEP286Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTTest; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverter10Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterRecoveryTest; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/ASTImplTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/LambdaRegressionTest; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverter18Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/AbstractASTTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/CompilerInvocationTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/ast/MessageSend; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterBugsTestJLS8; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/GenericsRegressionTest_1_7; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.compiler.tool.tests/Lorg/eclipse/jdt/compiler/tool/tests/CompilerInvocationTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverter15JLS8Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/util/Util; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.compiler.tool.tests/Lorg/eclipse/jdt/compiler/tool/tests/CompilerToolTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/dom/ASTRequestor; </td>
                </tr>

                </table>
<table>

<th colspan="2"> Discussion </th>

        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-09T16:36:56Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> When we try to compile we receive an error saying "error class already defined" but the same code using Eclipse 2019-06 works as expected. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-09T16:41:52Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> I'm going to see if I can narrow this down at least to a specific I-build that things changed. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-09T17:20:50Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> The change happened between I20190701-1805 (works ok) and I20190708-1800 (causes error described below)

There are 28 errors, but I think the "root" error I get, when building commit c673caf92ee19d59f03095ca5d15943a6e0ac540, is:

Description	Resource	Path	Location	Type
The type ASTInclusionStatement is already defined	ASTPreprocessorNode.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 296	Java Problem


I will try and make a reduced test case, but in the meantime these errors are obtained using:
- the SDK with no additional plug-ins installed
- Revision c673caf92ee19d59f03095ca5d15943a6e0ac540 of https://git.eclipse.org/c/cdt/org.eclipse.cdt.git/
- only org.eclipse.cdt.core and org.eclipse.cdt.target projects imported in workspace
- target platform set to cdt.target (in org.eclipse.cdt.target)

All the errors:

Description	Resource	Path	Location	Type
ASTInclusionStatement cannot be resolved to a type	CPreprocessor.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 950	Java Problem
ASTInclusionStatement cannot be resolved to a type	CPreprocessor.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 1007	Java Problem
ASTInclusionStatement cannot be resolved to a type	CPreprocessor.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 1743	Java Problem
ASTInclusionStatement cannot be resolved to a type	ILocationCtx.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 37	Java Problem
ASTInclusionStatement cannot be resolved to a type	LocationCtx.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 149	Java Problem
ASTInclusionStatement cannot be resolved to a type	LocationCtxFile.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 29	Java Problem
ASTInclusionStatement cannot be resolved to a type	LocationCtxFile.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 35	Java Problem
ASTInclusionStatement cannot be resolved to a type	LocationCtxFile.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 38	Java Problem
ASTInclusionStatement cannot be resolved to a type	LocationCtxFile.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 97	Java Problem
ASTInclusionStatement cannot be resolved to a type	LocationCtxFile.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 98	Java Problem
ASTInclusionStatement cannot be resolved to a type	LocationMap.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 150	Java Problem
ASTInclusionStatement cannot be resolved to a type	LocationMap.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 150	Java Problem
ASTInclusionStatement cannot be resolved to a type	LocationMap.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 250	Java Problem
ASTInclusionStatement cannot be resolved to a type	LocationMap.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 258	Java Problem
ASTInclusionStatement cannot be resolved to a type	LocationMap.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 258	Java Problem
ASTInclusionStatement cannot be resolved to a type	LocationMap.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 874	Java Problem
The constructor LocationCtxFile(LocationCtxContainer, String, AbstractCharArray, int, int, int, ASTInclusionStatement, boolean) refers to the missing type ASTInclusionStatement	LocationMap.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 111	Java Problem
The method encounterPoundInclude(int, int, int, int, char[], String, boolean, boolean, boolean, IFileNomination) from the type LocationMap refers to the missing type ASTInclusionStatement	CPreprocessor.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 1713	Java Problem
The method encounterPoundInclude(int, int, int, int, char[], String, boolean, boolean, boolean, IFileNomination) from the type LocationMap refers to the missing type ASTInclusionStatement	CPreprocessor.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 1732	Java Problem
The method encounterPoundInclude(int, int, int, int, char[], String, boolean, boolean, boolean, IFileNomination) from the type LocationMap refers to the missing type ASTInclusionStatement	CPreprocessor.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 1791	Java Problem
The method getInclusionStatement() from the type ILocationCtx refers to the missing type ASTInclusionStatement	CPreprocessor.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 950	Java Problem
The method getInclusionStatement() from the type ILocationCtx refers to the missing type ASTInclusionStatement	CPreprocessor.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 1770	Java Problem
The method getInclusionStatement() from the type LocationCtx refers to the missing type ASTInclusionStatement	ASTPreprocessorNode.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 705	Java Problem
The method getInclusionStatement() from the type LocationCtx refers to the missing type ASTInclusionStatement	LocationCtxContainer.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 240	Java Problem
The method getInclusionStatement() from the type LocationCtxFile refers to the missing type ASTInclusionStatement	ASTPreprocessorNode.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 800	Java Problem
The method getInclusionStatement() from the type LocationCtxFile refers to the missing type ASTInclusionStatement	LocationMap.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 874	Java Problem
The return types are incompatible for the inherited methods ILocationCtx.getInclusionStatement(), LocationCtx.getInclusionStatement()	LocationCtxContainer.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 33	Java Problem
The type ASTInclusionStatement is already defined	ASTPreprocessorNode.java	/org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner	line 296	Java Problem </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-09T17:41:26Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> I cannot figure out how to make a reduced test case - if I do any edit on ASTPreprocessorNode.java in the editor (just make editor dirty and save, no changes needed) the error goes away. 

The error will then reappear if I clean & build the project.

I can try to provide a further reduced testcase, but I need some guidance on to how. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-09T18:02:24Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> The regression is from commit 1fbf13c28311e9090a4ae402b14adbc440f874ec for bug 547181. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-09T19:54:15Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Andrey Loskutov from comment #4)
> The regression is from commit 1fbf13c28311e9090a4ae402b14adbc440f874ec for
> bug 547181.

Thanks for bisecting this, Andrey! </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-09T20:50:51Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Jonah Graham from comment #2)
> - target platform set to cdt.target (in org.eclipse.cdt.target)

cdt.target doesn't work for me, but with cdt-baseline.target i can see the The type ASTInclusionStatement is already defined error </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-10T10:14:33Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Problem is in org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.buildTypeBindings(AccessRestriction)

The condition
		if (this.fPackage.hasType0Any(typeDecl.name)) {
inside loop labelled the nextType:
returns true because of a MissingTypeBinding

Basically the comment:
			// if a type exists, check that its a valid type
[...]
is not really done anymore </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-10T18:11:15Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Jonah Graham from comment #3)
> I cannot figure out how to make a reduced test case - if I do any edit on
> ASTPreprocessorNode.java in the editor (just make editor dirty and save, no
> changes needed) the error goes away. 
> 
> The error will then reappear if I clean & build the project.
> 
> I can try to provide a further reduced testcase, but I need some guidance on
> to how.

I now know why you couldn't create a reduced testcase: If unrelated code is removed the the error always disappears. It turns out that the bug only appears if org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.MAX_AT_ONCE is exceeded. (default value is 2000).

So as workaround, you can run eclipse with -DmaxCompiledUnitsAtOnce=3000 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-10T22:53:22Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Jonah Graham from comment #2)
> Description	Resource	Path	Location	Type
> The type ASTInclusionStatement is already defined	ASTPreprocessorNode.java
> /org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner
> line 296	Java Problem

One thing that's unusual about ASTPreprocessorNode.java is that it defines multiple top-level classes in the same file. I wonder if the problem is related to that. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-11T09:07:19Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Nathan Ridge from comment #9)
> (In reply to Jonah Graham from comment #2)
> > Description	Resource	Path	Location	Type
> > The type ASTInclusionStatement is already defined	ASTPreprocessorNode.java
> > /org.eclipse.cdt.core/parser/org/eclipse/cdt/internal/core/parser/scanner
> > line 296	Java Problem
> 
> One thing that's unusual about ASTPreprocessorNode.java is that it defines
> multiple top-level classes in the same file. I wonder if the problem is
> related to that.

I wouldn't call it unusual, but that is necessary for the bug to appear.

Here is a minimal test case (bug appears with -DmaxCompiledUnitsAtOnce=2 in eclipse.ini):

--------test/ARequiresNested.java------
package test;

public class ARequiresNested {
	Nested n;
}
---------test/BRequiresToplevel.java------
package test;

public class BRequiresToplevel {
	TopLevel t;
}
---------test/TopLevel.java------
package test;

public class TopLevel {

}

class Nested extends TopLevel {
}
-------------------------------- </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-11T09:19:58Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/147503 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-11T10:02:22Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Eclipse Genie from comment #11)
> New Gerrit change created: https://git.eclipse.org/r/147503

While I'm looking from some distance, is my following understanding correct?

- hasType0Any() should not return a MissingTypeBinding

- the change also potentially affects specific ProblemReferenceBinding

- the original purpose of this method is to prevent creating the same type binding twice, which would violate a fundamental invariant in the compiler

- the invariant is not relevant for any invalid binding, not found, missing or otherwise, because type errors involving invalid bindings are irrelevant (do we report those at all?)

=> ergo, a stricter check is the right thing to do here, right? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-11T10:39:54Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Stephan Herrmann from comment #12)
> => ergo, a stricter check is the right thing to do here, right?

So do you agree with the patch or do you think we should instead check that directly additionally check for MissingTypeBindinding or maybe check problemID() != NOT_FOUND or something like that? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-11T10:51:38Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Till Brychcy from comment #13)
> (In reply to Stephan Herrmann from comment #12)
> > => ergo, a stricter check is the right thing to do here, right?
> 
> So do you agree with the patch or do you think we should instead check that
> directly additionally check for MissingTypeBindinding or maybe check
> problemID() != NOT_FOUND or something like that?

ups, "stricter" probably wasn't clear from the context.

Initially I had expected that you change behavior only for MissingTypeBinding, but then I tried to convince myself that also affecting other invalid types "shouldn't hurt". Thus I'm fine either way. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-11T11:32:01Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/147503 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=c19c6a4f496a82dc889f7978fc504c559cb52dec </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-11T11:32:25Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Eclipse Genie from comment #15)
> Gerrit change https://git.eclipse.org/r/147503 was merged to [master].
> Commit:
> http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/
> ?id=c19c6a4f496a82dc889f7978fc504c559cb52dec

Released for 4.13M3 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-19T16:52:29Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Till Brychcy from comment #16)
> (In reply to Eclipse Genie from comment #15)
> > Gerrit change https://git.eclipse.org/r/147503 was merged to [master].
> > Commit:
> > http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/
> > ?id=c19c6a4f496a82dc889f7978fc504c559cb52dec
> 
> Released for 4.13M3

Hi Till, Thank you for the fast turnaround on this. I am very pleased that it is fixed before the 2019-09 release. I have verified the original testcase from Comment 2 with I20190818-1800 and it is working great now. Thanks! </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-21T07:03:09Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Jonah Graham from comment #17)

> Hi Till, Thank you for the fast turnaround on this. I am very pleased that
> it is fixed before the 2019-09 release. I have verified the original
> testcase from Comment 2 with I20190818-1800 and it is working great now.
> Thanks!


@John: Thanks for confirming that it works! Moving to verified. </td> </tr>
        </table>
</body>
</html>
