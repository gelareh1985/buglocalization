<html>

<style>
html{
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ;
    font-size: 17px;
    display: table;
}
table,th,td {
  border: 1px solid black;
  width: 1200;
  text-align:justify;
  word-break:break-all;
}

th{
background-color: lightskyblue;
font-size: 16px;
border: none;
text-align:left;
}

td{
background-color: #d5e3c8;
font-size: 14px;
}

.container {
  position: relative;
  text-align:center;
  padding-top: 70%;
}

.responsive-iframe {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  width: 100%;
  height: 100%;
  border: 2px solid #73AD21;
}

</style>
<body>

<h2>Bug report Information</h2>
<table>

    <th colspan="2"> Bug Report </th>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Bug Report Number </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 549457 </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Summary </td>
        <td  style="width: 80%; background-color:#f7fff0;"> JavaBuilder.build() does not build on .settings/org.eclipse.jdt.core.prefs changes </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Creation Time </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 2019-07-22T14:11:28Z </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Status </td>
        <td  style="width: 80%; background-color:#f7fff0;"> VERIFIED </td>
    </tr>

    <th colspan="2"> Bug Fix </th>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Bugfix Commit </td>
        <td  style="width: 80%; background-color:#f7fff0;"> Bug 549249 - [formatter] Extend Blank Lines settings to remove excess
lines

Change-Id: I93681309ba635155aab55cdc722ab6fdb306f0cc
Signed-off-by: Mateusz Matela <mateusz.matela@gmail.com>
 </td>
    </tr>
    <tr>
        <td  tyle="width: 20%; background-color:#d5e3c8;"> Bugfix Time </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 2019-07-29T20:58:52Z </td>
    </tr>
    </table>
<table>

<th colspan="2"> Ranked List of Class Diagrams </th>

<tr>
<td  style="width: 20%; font-size: 10px; background-color:#d5e3c8">

            <ul>
                <li style="font-weight: bold;"> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JavaBuilder; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JavaModelManagerTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Util; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTConverter; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTRewrite; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JavaPDOM; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ExternalJavaProject; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JdtApt; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTConverter10Test; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> EclipseFileManager; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Util; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> APIDocumentationTests$JavaCoreJavadocAnalyzer; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ClassFileToIndexConverter; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> EclipseCompiler; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> BuildJarIndex; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> GeneratedResourceChangeListener$PreBuildVisitor; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> BasicBuildTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> IdeFilerImpl; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ClasspathUtil; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ReconcileFilerImpl; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> StreamHasher; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> AbstractRegressionTest$JavacTestOptions$EclipseHasABug; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTNode; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JavaIndexerApplication; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JavaIndex; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTRewriteFormatter; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> RunAllJava8Tests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> DRLVMLauncher; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JRTUtil; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> DiskIndex$IntList; </a> </li>
            </ul>   
            
</td>
<td  rowspan="30" style="width: 80%;  background-color:#d5e3c8"> 
    <div class="container">
    <iframe class="responsive-iframe" src="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" name="myIframe">
        <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html">SELFHTML</a>
    </iframe>
    </div>
</td>
</tr>
</table>
<table>

<th colspan="2"> Ranked List of Classifiers </th>

                <tr>
                    <td  style="font-size: 12px; font-weight: bold; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/builder/JavaBuilder; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/JavaProject; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/model/JavaModelManagerTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/util/Util; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/builder/BuildNotifier; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/model/JavaProjectTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/dom/ASTConverter; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/dom/rewrite/ASTRewrite; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/pdom/java/JavaPDOM; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/ExternalJavaProject; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.apt.core/Lorg/eclipse/jdt/apt/core/build/JdtApt; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverter10Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.apt.core/Lorg/eclipse/jdt/apt/core/build/AptBuilder; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/JavaModelManager; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.compiler.apt/Lorg/eclipse/jdt/internal/compiler/apt/util/EclipseFileManager; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverter18Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverter9Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/util/Util; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/model/ModelTestsUtil; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/APIDocumentationTests$JavaCoreJavadocAnalyzer; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverter12Test; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterJavadocTest; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/pdom/indexer/ClassFileToIndexConverter; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.compiler.tool/Lorg/eclipse/jdt/internal/compiler/tool/EclipseCompiler; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/BuildJarIndex; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterBugsTest; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/model/JavaElement8Tests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.compiler.tool/Lorg/eclipse/jdt/internal/compiler/tool/EclipseFileManager; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/model/Java9ElementTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.apt.core/Lorg/eclipse/jdt/apt/core/internal/generatedfile/GeneratedResourceChangeListener$PreBuildVisitor; </td>
                </tr>

                </table>
<table>

<th colspan="2"> Discussion </th>

        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-22T14:11:28Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> If the file .settings/org.eclipse.jdt.core.prefs changes, JDT does not automatically rebuild the project.

Looking on the code in org.eclipse.jdt.internal.core.builder.JavaBuilder.build(int, Map, IProgressMonitor), line 186 we check if the classpath has changes and do a full buiild in that case, but we do not have a special handling on the compiler preferences change.

This leads to the effect that manually changing the org.eclipse.jdt.core.prefs triggers auto-build but build does not do ANYTHING (org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.addAffectedSourceFiles() has no source files in the delta).

Only *manual* clean build after that detects new compiler errors / fixes compiler errors (we are switching for example compliance from 1.8 to 1.7 and the compiler does not "detect" illegal lambda's in the code). Same for all other settings that can be changed.

I wonder if this is expected behavior, and a design decision, or just missing "if settings changed => rebuild" branch in JavaBuilder. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-22T14:21:35Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Andrey Loskutov from comment #0)
> I wonder if this is expected behavior, and a design decision, or just
> missing "if settings changed => rebuild" branch in JavaBuilder.

If this is just a bug, we can try to provide a patch. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-22T16:09:17Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Very good catch!

The particular code area hasn't significantly changed in a long time, so I doubt we can find out the original motivation.

For the use case at hand I would think testing for option changes would be a good thing. OTOH, when you go the official way of changing options via the UI, a full build will be triggered from there (after a dialog). So any change should make sure that we don't end up with duplicate builds in that case.

BTW, when making changes in that area, let me suggest a little clean up: see the code comment
// if the output location changes, do not delete the binary files from old location
// the user may be trying something

Looking at today's code I can't make a lot of sense of that comment.

My guess is, that this should have been removed as part of https://git.eclipse.org/c/jdt/eclipse.jdt.core.git/diff/org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/builder/JavaBuilder.java?id=e3d3c02cc33fd5166184422215f4903c5a405e0f </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-22T19:11:37Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Andrey Loskutov from comment #1)
> (In reply to Andrey Loskutov from comment #0)
> > I wonder if this is expected behavior, and a design decision, or just
> > missing "if settings changed => rebuild" branch in JavaBuilder.
> 
> If this is just a bug, we can try to provide a patch.

I guess it is a design decision, as the UI asks if a rebuild should be done, and I sometimes use that:

When creating a workspace for a project, I reconfigure individual warnings in the UI and decline an immediate rebuild, but rather manually delete the corresponding items from the problems view (because it is faster).

I do that problem type by problem type until I'm satisfied and then trigger a rebuild. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-22T19:14:37Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> But my use case could also be achieved by disabling autobuild while doing that, so I don't really oppose a change here. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-22T19:22:56Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Till Brychcy from comment #3)
> I guess it is a design decision, as the UI asks if a rebuild should be done,
> and I sometimes use that:
> 
> When creating a workspace for a project, I reconfigure individual warnings
> in the UI and decline an immediate rebuild, but rather manually delete the
> corresponding items from the problems view (because it is faster).
> 
> I do that problem type by problem type until I'm satisfied and then trigger
> a rebuild.

I assume UI do not immediately set options on *every* option change, but only on "OK" or "Apply"? In that case we could think about some extra API or option, let brainstorm that.

Our use case is that we have project settings managed in Git, so if someone in team changes them, we want everyone to see immediate effect after pull, without manual intervention (because you don't need to know that at all). This makes sure developer with same project settimgs also see same compiler errors, and do not wonder why some code compiles in one workspace but not in another one. 

Another use case we have is to make sure customers don't shoot itself in the foot by playing with settings, and *if* they do, they see immediate effect, not some days after, where they already forgot about touching some files. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-22T19:25:33Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Till Brychcy from comment #4)
> But my use case could also be achieved by disabling autobuild while doing
> that, so I don't really oppose a change here.

Right, this would be an option too. The only thing I really fear is that our gazillion of JDT tests somehow depend on NOT building on option changes, but we will see it once we have the patch :) </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-23T14:22:19Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/146509 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-23T14:24:33Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/146510 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-23T21:24:29Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> With the patch applied, what happens if Build automatically is disabled, and then you change options via the UI? I fear that the old behavior (build after question) is changed to never build? If so, that would be a loss of functionality. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-24T06:33:26Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Stephan Herrmann from comment #9)
> With the patch applied, what happens if Build automatically is disabled, and
> then you change options via the UI? I fear that the old behavior (build
> after question) is changed to never build? If so, that would be a loss of
> functionality.

I do see a build when I turn auto-build off. I clean the project and check the bin folder after: changing the compiler compliance from the preference page, and choosing the "yes" option when asked whether to build.

Or did I misunderstand you? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-24T07:33:19Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Andrey asked, if the preference page triggers a build of its own, do we have two builds.

When I change the settings file manually:

"Worker-7: Building workspace" #40 prio=5 os_prio=0 tid=0x00007ffef4001800 nid=0x7322 at breakpoint[0x00007fff1d0f9000]                                                                                                                      
   java.lang.Thread.State: RUNNABLE                                                                                                                                                                                                          
        at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:163)                                                                                                                                                     
        at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:833)                                                                                                                                                        
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)                                                                                                                                                                       
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:220)                                                                                                                                                   
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:263)                                                                                                                                                   
        at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:316)                                                                                                                                                        
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)                                                                                                                                                                       
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:319)                                                                                                                                                   
        at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:371)                                                                                                                                               
        at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:392)                                                                                                                                                        
        at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:154)                                                                                                                                                      
        at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:244)                                                                                                                                                          
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

When I change the setting from the preference page, there is no auto-build running and there is this job building:

"Worker-10: Rebuilding" #45 prio=5 os_prio=0 tid=0x00007fff10021000 nid=0x3638 at breakpoint[0x00007fff1d2fb000]
   java.lang.Thread.State: RUNNABLE
        at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:163)
        at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:833)
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:220)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:263)
        at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:316)
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:319)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:278)
        at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:468)
        at org.eclipse.core.internal.resources.Project$1.run(Project.java:566)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2295)
        at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:540)
        at org.eclipse.core.internal.resources.Project.build(Project.java:116)
        at org.eclipse.jdt.internal.ui.util.CoreUtility$BuildJob.run(CoreUtility.java:162)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

The same CoreUtility$BuildJob will cancel the auto-build job before doing the build. I've tried setting a breakpoint before the auto-build is cancelled, inside the job, this leads to no auto-build.

But I can set a breakpoint here:

"main" #1 prio=6 os_prio=0 tid=0x00007ffff004f000 nid=0x6647 at breakpoint[0x00007ffff7fcb000]
   java.lang.Thread.State: RUNNABLE
        at org.eclipse.jdt.internal.ui.preferences.OptionsConfigurationBlock.processChanges(OptionsConfigurationBlock.java:1125)
        at org.eclipse.jdt.internal.ui.preferences.OptionsConfigurationBlock.performApply(OptionsConfigurationBlock.java:1073)
        at org.eclipse.jdt.internal.ui.preferences.CompliancePreferencePage.performApply(CompliancePreferencePage.java:162)
        at org.eclipse.jface.preference.PreferencePage.lambda$1(PreferencePage.java:289)
        at org.eclipse.jface.preference.PreferencePage$$Lambda$514/8633259.accept(Unknown Source)
        at org.eclipse.swt.events.SelectionListener$1.widgetSelected(SelectionListener.java:84)
        at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:252)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:89)
        at org.eclipse.swt.widgets.Display.sendEvent(Display.java:5564)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1405)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4828)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:4352)
        at org.eclipse.jface.window.Window.runEventLoop(Window.java:823)
        at org.eclipse.jface.window.Window.open(Window.java:799)
        at org.eclipse.ui.dialogs.PropertyDialogAction.run(PropertyDialogAction.java:153)
        at org.eclipse.jface.action.Action.runWithEvent(Action.java:474)
        at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:580)
        at org.eclipse.jface.action.ActionContributionItem.lambda$4(ActionContributionItem.java:412)
        at org.eclipse.jface.action.ActionContributionItem$$Lambda$248/62190059.handleEvent(Unknown Source)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:89)
        at org.eclipse.swt.widgets.Display.sendEvent(Display.java:5564)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1405)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4828)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:4352)
        at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$5.run(PartRenderingEngine.java:1160)
        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:338)
        at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1049)
        at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:155)
        at org.eclipse.ui.internal.Workbench.lambda$3(Workbench.java:635)
        at org.eclipse.ui.internal.Workbench$$Lambda$34/1079167170.run(Unknown Source)
        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:338)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:559)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150)
        at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:150)
        at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:203)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:137)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:107)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:255)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:661)
        at org.eclipse.equinox.launcher.Main.basicRun(Main.java:597)
        at org.eclipse.equinox.launcher.Main.run(Main.java:1476)
        at org.eclipse.equinox.launcher.Main.main(Main.java:1449)

Then I see, in parallel:

"Worker-1: Building workspace" #33 prio=5 os_prio=0 tid=0x00007ffff1c28800 nid=0x7319 at breakpoint[0x00007fff1d800000]
   java.lang.Thread.State: RUNNABLE
        at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:163)
        at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:833)
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:220)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:263)
        at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:316)
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:319)
        at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:371)
        at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:392)
        at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:154)
        at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:244)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

Once the auto-build job is done, resuming the UI code leads to the other build job:

Worker-1: Rebuilding" #33 prio=5 os_prio=0 tid=0x00007ffff1c28800 nid=0x7319 at breakpoint[0x00007fff1d800000]
   java.lang.Thread.State: RUNNABLE
        at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:163)
        at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:833)
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:220)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:263)
        at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:316)
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:319)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:278)
        at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:468)
        at org.eclipse.core.internal.resources.Project$1.run(Project.java:566)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2295)
        at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:540)
        at org.eclipse.core.internal.resources.Project.build(Project.java:116)
        at org.eclipse.jdt.internal.ui.util.CoreUtility$BuildJob.run(CoreUtility.java:162)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

This does a full build due to the code in that job. So we can have 2 full builds with unfortunate timing, on changes from the preference page. So maybe we want to show the preference page dialog only if the workspace is not auto-building? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-24T07:35:14Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Or, we show the dialog even with auto-build on, but we don't trigger the build job since its not necessary. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-24T08:04:37Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> I wasn't 100% which of your descriptions regards the state with your patch applied, but ...

(In reply to Simeon Andreev from comment #11)
> [...] So
> maybe we want to show the preference page dialog only if the workspace is
> not auto-building?

... yes, this seems the most natural consequence to me. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-24T10:15:51Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> I kind of expected to see code that checks if the contents of the preferences file has changed. Can we be sure that the timestamp only changes, if the contents change? 

Otherwise I could imagine problems if there are tools that automatically update the settings, but don't really change anything most of the time.

If comparing the contents is too hard, maybe at least add an "emergency" system property that allows to disable the new mechanism. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-24T11:39:27Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Till Brychcy from comment #14)
> I kind of expected to see code that checks if the contents of the
> preferences file has changed. Can we be sure that the timestamp only
> changes, if the contents change? 

I don't think it is the responsibility of JavaBuilder to verify diff/content of the files. If there is a delta reported (file created/deleted/modified), we should just build. At the level of the builder we are unable to do comprehensive analysis of changes and also shouldn't (IMHO).

> Otherwise I could imagine problems if there are tools that automatically
> update the settings, but don't really change anything most of the time.

Such tools must be fixed, because they do unneeded work. If some generator generates Java files out of some model again and again, without actually change the file, we don't complain either and just build the generated java code. If the user is abused by this, generator should be fixed, not builder.

> If comparing the contents is too hard, maybe at least add an "emergency"
> system property that allows to disable the new mechanism.

Yes, this is a good idea. Current state is of such "ancient" ages, that we might really see some unexpected effects with tools assuming that changing JDT core options is a no-op because "it was always the case".

So I would expect that we do something like the code in IndexManager does to allow end users and product integrators to disable the new feature as long as tooling is not yet updated to the new behavior:

// should JDT manage (update, delete as needed) pre-built indexes?
public static final String MANAGE_PRODUCT_INDEXES_PROPERTY = "jdt.core.manageProductIndexes"; //$NON-NLS-1$
private static final boolean IS_MANAGING_PRODUCT_INDEXES_PROPERTY = Boolean.getBoolean(MANAGE_PRODUCT_INDEXES_PROPERTY);

The VM option need to be read in JavaBuilder and in OptionsConfigurationBlock to know if the build is needed / was triggered automatically.

The VM option  should be something like "DISABLE_AUTOBUILD_ON_SETTINGS_CHANGE" and the default should be false (means, we always build on settings change if autobuild is on).

@Simeon: please update both gerrits accordingly. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-24T12:17:29Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Andrey Loskutov from comment #15)
> [...]. At the level of the builder we are unable to do
> comprehensive analysis of changes and also shouldn't (IMHO).

Unable is not true: I think it wouldn't be too hard. You could persist it in org.eclipse.jdt.internal.core.builder.State and check it like in JavaBuilder.hasClasspathChanged

> [...]. If some generator
> generates Java files out of some model again and again, without actually
> change the file, we don't complain either and just build the generated java
> code. [...]

The regenerated files: yes, but files that depend on this: only if structural changes are detected (e.g. if you just change a method body, no other files are compiled). </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-25T12:59:10Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/146509 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=65567fc00b5666931f115b6d726ca29106dc87d7 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-25T12:59:52Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/146510 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.ui.git/commit/?id=abe74c95cd4bb707f45cdfafdfc15969525a3c90 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-29T14:47:41Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> All our tests are green (SDK + our internal product too), but not closing yet, see below.

@Simeon: please send a note to cross-projects and platform-dev list about changed behavior. We want explicitly warn people modifying .settings/org.eclipse.jdt.core.prefs file in their code about automatic builds that will be triggered now and about new property they might use to avoid that if they can't change their code for whatever reason.

I also think we should add a N&N entry to the JDT core 4.13 notes about changed behavior. For the N&N this repo is used: https://git.eclipse.org/c/www.eclipse.org/eclipse/news.git/.

After that we can close this task. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-29T14:49:19Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> My last comment in https://git.eclipse.org/r/#/c/146509/ hasn't been addressed yet. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-29T15:15:48Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> OK Andrey and Till, will do so tomorrow. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-30T06:57:10Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/146767 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-30T07:19:24Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/146768 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-30T08:46:55Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/146767 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=2d905647ce7b6e58c4064c51029cee2b8e3691c5 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-30T10:53:15Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Created attachment 279436
Line number 19 of SamplerHandler

This has caused a bad regression wherein workspace setting is not respected.

Steps
1) Import project attached
2) Ensure that there is no project setting
3) On line number 19 of SamplerHandler, quickfix - change warning to error

The warning "The value of the local variable a is not used" should become error.

It doesn't work after commit abe74c95cd4bb707f45cdfafdfc15969525a3c90 (jdt ui) & 65567fc00b5666931f115b6d726ca29106dc87d7 ( jdt core)

If I hard reset to 1 commit before this in both the repos, this scenario works fine. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-30T10:54:31Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> >>change warning to error

in workspace settings ! </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-30T11:10:04Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Vikas Chandra from comment #26)
> >>change warning to error
> 
> in workspace settings !

Thanks for catching, we will fix it ASAP. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-30T11:19:37Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/146782 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-30T12:56:21Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/146782 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.ui.git/commit/?id=2900892ff0e671ffb93de80d49c9f793809d1cee </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-30T16:33:53Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/146768 was merged to [master].
Commit: http://git.eclipse.org/c/www.eclipse.org/eclipse/news.git/commit/?id=5af3d6e37af9ba8421b342b4c6c2c6a6d6f17dc2 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-30T17:39:28Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> We should be done now. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-07-31T14:48:26Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/146861 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-02T16:20:03Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/146861 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=095b5787967ccad7c707d3305ad018e425341ead </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-07T11:17:53Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> >>Unable is not true: I think it wouldn't be too hard. You could persist it in >>org.eclipse.jdt.internal.core.builder.State and check it like in >>JavaBuilder.hasClasspathChanged

There can multiple other scenarios where the rebuild will happen even when the settings are the same ( like changing an option to new value in setting file and then changing it back to old and saving etc, adding whitespace/ new line by mistake while viewing all options and then save all, changing error to Error etc.)

Right now we do have a VM property ( -Dorg.eclipse.jdt.core.disableAutoBuildOnSettingsChange=true) to control this but I think before it is removed, it will be good to make this change ("checks if the contents of the preferences file has changed" )

I will open a bug to track this. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-07T11:25:21Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> >>I will open a bug to track this.

Opened bug 549841.

I also opened bug for equivalent problem in API analysis builder (bug 549838) and PDE compiler (bug 549838). </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-07T11:28:46Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> >>and PDE compiler (bug 549838).

PDE compiler (bug 549839). </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-12T10:10:07Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/147540 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-12T10:10:13Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/147541 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-12T10:14:03Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> If we change the VM property name from 
-Dorg.eclipse.jdt.core.disableAutoBuildOnSettingsChange
to
-Dorg.eclipse.disableAutoBuildOnSettingsChange

the same property can be used for other builders too. ( for eg https://git.eclipse.org/r/#/c/147181/)


Simeon/Andrey, What do you think? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-12T13:37:50Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Vikas Chandra from comment #39)
> If we change the VM property name from 
> -Dorg.eclipse.jdt.core.disableAutoBuildOnSettingsChange
> to
> -Dorg.eclipse.disableAutoBuildOnSettingsChange
> 
> the same property can be used for other builders too. ( for eg
> https://git.eclipse.org/r/#/c/147181/)
> 
> 
> Simeon/Andrey, What do you think?

I'm fine with that, but please note we have to update this string in N&N and JDT UI (OptionsConfigurationBlock.java) too. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-12T16:01:52Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/147563 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-12T16:03:14Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Andrey Loskutov from comment #40)
> (In reply to Vikas Chandra from comment #39)
> > If we change the VM property name from 
> > -Dorg.eclipse.jdt.core.disableAutoBuildOnSettingsChange
> > to
> > -Dorg.eclipse.disableAutoBuildOnSettingsChange
> > 
> > the same property can be used for other builders too. ( for eg
> > https://git.eclipse.org/r/#/c/147181/)
> > 
> > 
> > Simeon/Andrey, What do you think?
> 
> I'm fine with that, but please note we have to update this string in N&N and
> JDT UI (OptionsConfigurationBlock.java) too.


JDT UI -https://git.eclipse.org/r/#/c/147563/
JDT core - https://git.eclipse.org/r/#/c/147540/
N&N  - https://git.eclipse.org/r/#/c/147541/ </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-12T18:19:41Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/147541 was merged to [master].
Commit: http://git.eclipse.org/c/www.eclipse.org/eclipse/news.git/commit/?id=87ce0b8731c585fee104c6b057468f2ea641c396 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-12T18:19:54Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/147540 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=6a821a3322279e7ffe8b12591f782eb774215153 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-12T18:20:36Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/147563 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.ui.git/commit/?id=af7f3585eff72fdbf6a07dc0cfe673d0cf7c26a6 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-12T18:21:05Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Vikas Chandra from comment #42)
> 
> JDT UI -https://git.eclipse.org/r/#/c/147563/
> JDT core - https://git.eclipse.org/r/#/c/147540/
> N&N  - https://git.eclipse.org/r/#/c/147541/

Thanks, merged. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-21T06:27:06Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> verified 

1) comment#0
2) comment#25
3) Use of -Dorg.eclipse.disableAutoBuildOnSettingsChange=true disables this behavior

on

Version: 2019-09 (4.13)
Build id: I20190819-2355 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-21T11:07:38Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Eclipse Genie from comment #43)
> Gerrit change https://git.eclipse.org/r/147541 was merged to [master].
> Commit:
> http://git.eclipse.org/c/www.eclipse.org/eclipse/news.git/commit/
> ?id=87ce0b8731c585fee104c6b057468f2ea641c396

<b><nobr>-Dorg.eclipse.disableAutoBuildOnSettingsChange=true</nobr></b>.

Error Line 216, Column 15: element "nobr" undefined
      <b><nobr>-Dorg.eclipse.disableAutoBuildOnSettingsChange=true</nobr></b>.

You have used the element named above in your document, but the document type you are using does not define an element of that name. 

Please fix this in N&N. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-21T11:17:52Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> This is coming from here?

https://git.eclipse.org/c/www.eclipse.org/eclipse/news.git/commit/?id=bfa09be8 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-08-21T12:38:48Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> 

(In reply to Simeon Andreev from comment #49)
> This is coming from here?
> 
> https://git.eclipse.org/c/www.eclipse.org/eclipse/news.git/commit/
> ?id=bfa09be8

Yes, 
https://git.eclipse.org/r/#/c/147942/
I have asked Michael Keppler to fix </td> </tr>
        </table>
</body>
</html>
