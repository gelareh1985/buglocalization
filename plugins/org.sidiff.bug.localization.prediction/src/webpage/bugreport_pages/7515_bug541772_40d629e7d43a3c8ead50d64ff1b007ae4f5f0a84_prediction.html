<html>

<style>
html{
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ;
    font-size: 17px;
    display: table;
}
table,th,td {
  border: 1px solid black;
  width: 1200;
  text-align:justify;
  word-break:break-all;
}

th{
background-color: lightskyblue;
font-size: 16px;
border: none;
text-align:left;
}

td{
background-color: #d5e3c8;
font-size: 14px;
}

.container {
  position: relative;
  text-align:center;
  padding-top: 70%;
}

.responsive-iframe {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  width: 100%;
  height: 100%;
  border: 2px solid #73AD21;
}

</style>
<body>

<h2>Bug report Information</h2>
<table>

    <th colspan="2"> Bug Report </th>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Bug Report Number </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 541772 </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Summary </td>
        <td  style="width: 80%; background-color:#f7fff0;"> In Eclipse 2018-09, Maven "runtime" scoped dependencies cause compilation errors even when not used </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Creation Time </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 2018-12-01T02:12:00Z </td>
    </tr>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Status </td>
        <td  style="width: 80%; background-color:#f7fff0;"> RESOLVED </td>
    </tr>

    <th colspan="2"> Bug Fix </th>
    <tr>
        <td  style="width: 20%; background-color:#d5e3c8;"> Bugfix Commit </td>
        <td  style="width: 80%; background-color:#f7fff0;"> Bug 545691 - Javadoc errors in jdt.core bundles

- fix javadoc errors/warnings in jdt.core classes

Change-Id: I4708bb425398235675948df94280263982184a98
Signed-off-by: Jeff Johnston <jjohnstn@redhat.com> </td>
    </tr>
    <tr>
        <td  tyle="width: 20%; background-color:#d5e3c8;"> Bugfix Time </td>
        <td  style="width: 80%; background-color:#f7fff0;"> 2019-03-25T08:04:16Z </td>
    </tr>
    </table>
<table>

<th colspan="2"> Ranked List of Class Diagrams </th>

<tr>
<td  style="width: 20%; font-size: 10px; background-color:#d5e3c8">

            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> BindingMap; </a> </li>
            </ul>   
            
            <ul>
                <li style="font-weight: bold;"> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ProblemReporter; </a> </li>
            </ul>   
            
            <ul>
                <li style="font-weight: bold;"> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> GenericsRegressionTest_1_8; </a> </li>
            </ul>   
            
            <ul>
                <li style="font-weight: bold;"> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ParameterizedTypeBinding; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTConverter; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JavaProject; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> BindingToIndexConverter; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTConverterBugsTest; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> LambdaExpression; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> HandleFactory; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Sorting; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> MissingTypesGuesser; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> NullAnnotationModelTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ReconcileFilerImpl; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ImplicitNullAnnotationVerifier$InheritedNonNullnessInfo; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> JDTCompilerAdapter; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> AbstractRegressionTest$JavacCompiler; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Checks; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> IDOMFactory; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> NonNullDefaultAwareTypeAnnotationWalker; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> Factory; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> IField; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> CompilerToolTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> FormatterMassiveRegressionTests; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ASTRewritingExpressionsTest; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ModuleInfoBuilder; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> IProblem; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> MatchLocatorParser; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> CompilerToolJava9Tests$CompilerBuilder; </a> </li>
            </ul>   
            
            <ul>
                <li> <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" target="myIframe"> ClassFileToIndexConverter; </a> </li>
            </ul>   
            
</td>
<td  rowspan="30" style="width: 80%;  background-color:#d5e3c8"> 
    <div class="container">
    <iframe class="responsive-iframe" src="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html" name="myIframe">
        <a href="C:/Users/gelareh/git/buglocalization/plugins/org.sidiff.bug.localization.prediction/src/webpage/image_html_pages/diagram_default.html">SELFHTML</a>
    </iframe>
    </div>
</td>
</tr>
</table>
<table>

<th colspan="2"> Ranked List of Classifiers </th>

                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/hierarchy/BindingMap; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/problem/ProblemReporter; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/GenericsRegressionTest_1_8; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; font-weight: bold; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/lookup/ParameterizedTypeBinding; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/dom/ASTConverter; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/GenericsRegressionTest; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/JavaProject; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/lookup/SourceTypeBinding; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/pdom/indexer/BindingToIndexConverter; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.compiler/Lorg/eclipse/jdt/core/tests/compiler/regression/GenericsRegressionTest_9; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterBugsTest; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/dom/ASTConverterJavadocTest; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/LambdaFactory; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/ast/LambdaExpression; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/ast/IPolyExpression; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/util/HandleFactory; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/util/Sorting; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/lookup/ConstraintExpressionFormula; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/ast/CastExpression; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/codeassist/MissingTypesGuesser; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/lookup/NestedTypeBinding; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/ast/Expression; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/ast/NullAnnotationMatching; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/lookup/PolyTypeBinding; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/core/dom/RecoveredTypeBinding; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core.tests.model/Lorg/eclipse/jdt/core/tests/model/NullAnnotationModelTests; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/core/builder/JavaBuilder; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/lookup/ProblemFieldBinding; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.core/Lorg/eclipse/jdt/internal/compiler/ast/ParameterizedSingleTypeReference; </td>
                </tr>

                
                <tr>
                    <td  style="font-size: 12px; background-color:#d5e3c8"> org.eclipse.jdt.apt.core/Lorg/eclipse/jdt/apt/core/internal/env/ReconcileFilerImpl; </td>
                </tr>

                </table>
<table>

<th colspan="2"> Discussion </th>

        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-12-01T02:12:00Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> I do not know how to troubleshoot this further, but importing the latest Apache Accumulo (https://github.com/apache/accumulo ; master = 2723e5de67e17a8ca2de4253019e0daf9490472f at the time) into the 2018-09 release, I noticed that Eclipse was reporting compilation errors because of the inability to resolve class path items which should have been brought in by a runtime-scoped dependency.

These items were not used in the code at all, and should not have been required for compilation (they were guava classes shaded into the hadoop-client-runtime). The compilation error marker occurred in the editor on the first line of the file. Again, this class had no compile-time references to this class. It would only have been used within the runtime library, not my code.

This only happens with the "2018-09" distribution. It does not happen with the previous "Photon" release, which seems to work correctly. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-12-01T15:08:57Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Moving to m2e for comments, since we know nothing about runtime-scoped dependencies.

Is there an m2e produced classpath configuration, where JDT behaves in unexpected ways? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-12-01T15:53:03Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> I think the bug report is unclear. It is not the presence of the dependencies on the runtime classpath, but there absence from the compilation classpath.

The errors are like:
"The type org.apache.hadoop.shaded.com.google.protobuf.GeneratedMessage$Builder cannot be resolved. It is indirectly referenced from required .class files"

So the question is: Why are these classes required for building now?

Moving back to JDT. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-12-01T15:54:01Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Till Brychcy from comment #2)
> dependencies on the runtime classpath, but there absence from the
 ... but >their< absence from the ... </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-12-01T18:46:50Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Sorry if the bug report isn't clear. I will try to clarify, if I can, but it can also be reproduced by cloning the project mentioned and importing as an existing Maven project.

The problem is that Eclipse seems unhappy that the dependency is missing from the class path. However, they should not be required for compilation, since they are runtime dependencies.

I don't know if this is a JDT bug or an m2e bug. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-12-01T19:42:28Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> The type is missing when the methods of SecurityProtos$TokenProto are created while trying to find a constructor for Token

UnresolvedReferenceBinding.resolve(LookupEnvironment, boolean) line: 123                            
     this=org.apache.hadoop.shaded.com.google.protobuf.GeneratedMessage$Builder

BinaryTypeBinding.resolveType(TypeBinding, LookupEnvironment, boolean) line: 231	
LookupEnvironment.getTypeFromTypeSignature(SignatureWrapper, TypeVariableBinding[], ReferenceBinding, char[][][], ITypeAnnotationWalker) line: 1963	
BinaryTypeBinding.createMethod(IBinaryMethod, IBinaryType, long, char[][][]) line: 857	       
     this=org.apache.hadoop.security.proto.SecurityProtos$TokenProto

BinaryTypeBinding.createMethods(IBinaryMethod[], IBinaryType, long, char[][][]) line: 990	
BinaryTypeBinding.cachePartsFrom(IBinaryType, boolean) line: 548	
LookupEnvironment.createBinaryTypeFrom(IBinaryType, PackageBinding, boolean, AccessRestriction) line: 1040	
LookupEnvironment.createBinaryTypeFrom(IBinaryType, PackageBinding, AccessRestriction) line: 1021	
Compiler.accept(IBinaryType, PackageBinding, AccessRestriction) line: 308	
LookupEnvironment.askForType(char[][], ModuleBinding) line: 249	
UnresolvedReferenceBinding.resolve(LookupEnvironment, boolean) line: 114	                         
     this=org.apache.hadoop.security.proto.SecurityProtos$TokenProto

BinaryTypeBinding.resolveType(TypeBinding, LookupEnvironment, boolean) line: 231	
BinaryTypeBinding.resolveTypesFor(MethodBinding) line: 1604	
BinaryTypeBinding.getMethods(char[]) line: 1321	                                                                           
     this=org.apache.hadoop.security.token.Token, selector = <init>

ParameterizedTypeBinding.getMethods(char[]) line: 826	
ParameterizedTypeBinding(ReferenceBinding).getMethods(char[], int) line: 1058	
MethodScope(Scope).getStaticFactory(ParameterizedTypeBinding, ReferenceBinding, TypeBinding[], InvocationSite) line: 5039	
AllocationExpression.inferDiamondConstructor(Scope, InvocationSite, TypeBinding, TypeBinding[], boolean[]) line: 606	
AllocationExpression.inferConstructorOfElidedParameterizedType(Scope) line: 586	
AllocationExpression.resolveType(BlockScope) line: 472	
LocalDeclaration.resolve(BlockScope) line: 378	
MethodDeclaration(AbstractMethodDeclaration).resolveStatements() line: 641	
[...] </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-12-01T19:49:18Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Doesn't happen in 4.8, happens in 4.9 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-12-01T21:17:41Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> OK, the actual change IS in m2e:

Compilation works with m2e.core 1.9.0.20180606-2036, because it puts hadoop-client-runtime-3.1.1.jar on the main (compilation) classpath

It doesn't work with m2e.core 1.9.1.20180912-1601, because it puts hadoop-client-runtime-3.1.1.jar only the test (compilation) classpath

Still it seems wrong that the types of methods parameters of methods in SecurityProtos$TokenProto are needed, which itself is only needed as type of a constructor parameter of Token </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-12-01T21:37:13Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Minimized example. 
The following example project compiles with javac (via maven) but not eclipse 4.8 or later (I haven't checked if earlier versions yet):

---- pom.xml:
<project xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<groupId>test</groupId>
	<artifactId>missing</artifactId>
	<version>0.0.1-SNAPSHOT</version>
	<dependencies>
      <dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-client-api</artifactId>
        <version>3.1.1</version>
      </dependency>
	</dependencies>
	<properties>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
	</properties>
</project>

--- src/main/java/pkg/Example.java
package pkg;

import org.apache.hadoop.security.token.Token;

public abstract class Example {
	public static void setConnectorInfo() {
		new Token();
	}
}

error is The project was not built since its build path is incomplete. Cannot find the class file for org.apache.hadoop.shaded.com.google.protobuf.GeneratedMessage$Builder. Fix the build path then try building this project </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-12-01T21:41:25Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> After modifying the example project to work without maven (i copied hadoop-client-api-3.1.1.jar directly into the project) I tested with 4.4.2 and it didn't compile either.

Older versions don't work on my mac anymore. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2018-12-01T22:36:56Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> The reason org.apache.hadoop.shaded.com.google.protobuf.GeneratedMessage$Builder is being resolved, is that it is parametrized and it could be a nested type according to the "$" in the name.

First of all, this distinction needs to be resolved, to create a ParameterizedTypeBinding with the right enclosing type (or null).

If type annotations were present, resolving would also be necessary to find out the number of non-statically enclosing classes to advance the walker to the correct level.

So it is probably hard to avoid resolving when creating the methods.

Maybe it is possible to avoid creating the methods (needFieldsAndMethods) at that point of time and somehow do this lazily later only if needed? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-02-27T23:29:17Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> This issue applies to the latest 2018-12 (4.10.0) and has basically caused me to be unable to develop using newer Eclipse versions. The last version that worked was Photon from summer 2018, but that's not going to be useful for developing in Java 11. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-02-28T00:15:38Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Christopher, our latest results indicate that there is a dependency path at *compile* time leading to the missing class. So perhaps the concept to think of the dependency as a runtime dependency is inadequate?
Have you tried declaring those as regular dependencies?

I read Till's comments as exploring options to be more resilient against an incomplete build path, but we can impossibly give guarantees that transitive dependencies are never needed during compilation. If Photon accepted the program it *could* well be that the compiler was just sloppy and didn't resolve information that is necessary for faithful compilation - theory speaking. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-02-28T00:30:59Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> I don't think it's appropriate to think of these as regular dependencies. They are not needed for compilation... only runtime. So, they should not result in an error during compilation in Eclipse.

FWIW, I was able to force the runtime dependency onto the compile-time class path and build in Eclipse with a profile that was activated by m2e's presence:

https://github.com/apache/accumulo/commit/394b34d350de168ce1052e78d03556a70e6d6cf0

I also had a similar issue with jetty-http, and worked around it the same way:

https://github.com/apache/accumulo/commit/b3ff32a8f4cacd6c13f3e11625c14ed2e0aade3f

This workaround is adequate for now, in case anybody else is having a similar issue... but Eclipse really shouldn't be requiring these classes to be present at all, since they aren't actually needed. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-02-28T00:34:15Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> And, I don't think Photon was being "sloppy". I think it was being correct. OpenJDK and OracleJDK command-line `javac` do not require these classes at compilation either. The classes are neither referenced by the code being compiled, nor present in any of the APIs being compiled against. They might be annotations on the class being compiled against, but those annotations do not need to be resolved for compilation. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-02-28T00:38:18Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Till Brychcy from comment #10)
> Maybe it is possible to avoid creating the methods (needFieldsAndMethods) at
> that point of time and somehow do this lazily later only if needed?

Or for the duration of BTB.createMethods() and BTB.createFields we should simply set LookupEnvironment.mayTolerateMissingType?
Cf. BTB.superclass().

Would have to test how overload resolution copes if one of the candidates has a MissingTypeBinding in its signature :-/ It would not be safe to just ignore the method with missing type, the actual type could well be a subtype of the missing type. Perhaps we'd need a potential ambiguity error.

But I think tolerating missing type is still easier than nixing cachePartsFrom(). Also storing the IBinaryType until methods are lazily requested looks undesirable to me.

@Till, WDYT?

Are we anywhere near creating a JUnit for this? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-02-28T00:51:37Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Christopher Tubbs from comment #13)
> I don't think it's appropriate to think of these as regular dependencies.
> They are not needed for compilation... only runtime. 

That's the exact question we are trying to find out. Interestingly, the language specification is totally silent about such issues, because it always assumes availability of all classes of an application.

To generally rule out relevance of transitive dependencies for compilation we'd need a module system that strictly prohibits API leaks. That we don't have, not even with JPMS, so what is needed and what is not needed is inevitably a gray zone.

(In reply to Christopher Tubbs from comment #14)
> And, I don't think Photon was being "sloppy". I think it was being correct.
> OpenJDK and OracleJDK command-line `javac` do not require these classes at
> compilation either.

That's not a proof :)

> The classes are neither referenced by the code being
> compiled, nor present in any of the APIs being compiled against.

I don't have the code at hand, but from comment 5 I seemed to understand that

- Token is API
- Token uses SecurityProtos$TokenProto in a method signature
  -> SecurityProtos$TokenProto must be API
- SecurityProtos$TokenProto uses GeneratedMessage$Builder in a method signature

I admit that this is looking one step deeper than would intuitively be needed, but I don't see reason to generally rule out relevance of GeneratedMessage$Builder for compilation. Sorry.

Everything else is resilience, not correctness. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-02-28T07:13:59Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Stephan Herrmann from comment #15)
> (In reply to Till Brychcy from comment #10)
> > Maybe it is possible to avoid creating the methods (needFieldsAndMethods) at
> > that point of time and somehow do this lazily later only if needed?
> 
> Or for the duration of BTB.createMethods() and BTB.createFields we should
> simply set LookupEnvironment.mayTolerateMissingType?
> Cf. BTB.superclass().

I don't really think that would help. As written above, the info is needed to set the enclosing class of a ParameterizedTypeBinding or to interpret type annotations.

> But I think tolerating missing type is still easier than nixing
> cachePartsFrom(). Also storing the IBinaryType until methods are lazily
> requested looks undesirable to me.

As optimization, we could usually try to cache them immediately and only delay it, if types that are not already cached would need to be resolved. Still we'd need to pass a parameter to determine if methods are actually needed or not.

As another alternative, maybe we could try to introduce a dedicated UnresolvedParameterizedTypeBinding that keeps a snapshot of all the info required to lazily complete the part of LookupEnvironment.getTypeFromTypeSignature that needs the resolved type. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-01T20:51:06Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/137903 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-04T20:17:17Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Till, what you have in gerrit looks interesting. Still, I would love to test the different strategies discussed here. Are you able to produce a JUnit? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-04T20:18:51Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> The last patch set already contains a junit </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-04T20:27:23Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Some background: Eager resolving for possibly nested URBs was added for bug 196253.

With the attached gerrit, this can be avoided thanks to Bug 460491 and minor follow-up Bug 498817.

It is still required to interpret type annotations, so the patch only skips it if none are present. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-04T20:33:50Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> BTW, I noted that more resolving could avoided as PTB.getExactConstructor currently invokes getMethods(TypeConstants.INIT) which resolves all constructors without checking the number of arguments (BTB.getExactConstructor only resolves methods with the right number of arguments). I already adjusted the junit for the current bug so it is still effective if this improved. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-23T17:18:28Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> @Stephan, do you expect to try the other strategies soon? 

Otherwise I intend to commit the patch soon, as doing this kind of change is best done early in the release cycle.

A note, in case you want to look at the code:

The change added to TypeSystem.getParameterizedType is consistent but currently not needed by any test case - I only was able to trigger a situation where it was actually required in a workspace by temporarily reverting the change in HashedParameterizedTypes.get (i.e. by invoking resolving PTB.enclosingType() instead of accessing PTB.enclosingType, so resolving is triggered) </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-26T19:08:59Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> New Gerrit change created: https://git.eclipse.org/r/139529 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-26T19:23:32Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Eclipse Genie from comment #24)
> New Gerrit change created: https://git.eclipse.org/r/139529

Thanks, I used the implementation as instructions to make the test even meaner, so that it would again fail. Then I applied my idea from comment 15 to see the test pass again.

I intentionally created a new gerrit on top of the previous, so you can decide if you want to adopt my change or just commit yours. *If* you adopt my part, please file a follow-up ticket for investigating overload resolution with missing types in signatures, as I didn't have the time to follow the road right now.

I think we agree that all these are heuristics the incrementally help to make the compiler more resilient against this kind of problem, without ever promising that indirectly referenced class files can be made 100% irrelevant.

(In reply to Till Brychcy from comment #23)
> [...] (i.e. by invoking
> resolving PTB.enclosingType() instead of accessing PTB.enclosingType, so
> resolving is triggered)

Actually, this exact field access looks strange to me, given that elsewhere you emphasize that this is now resolved on-demand. I'm sure you have good reasons, do you care to share the reasoning? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-26T19:54:40Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Stephan Herrmann from comment #25)
> (In reply to Eclipse Genie from comment #24)
> > New Gerrit change created: https://git.eclipse.org/r/139529
> 
> Thanks, I used the implementation as instructions to make the test even
> meaner, so that it would again fail. Then I applied my idea from comment 15
> to see the test pass again.
> 
> I intentionally created a new gerrit on top of the previous, so you can
> decide if you want to adopt my change or just commit yours. *If* you adopt
> my part, please file a follow-up ticket for investigating overload
> resolution with missing types in signatures, as I didn't have the time to
> follow the road right now.

Your patch looks good, especially as it would only make a difference if there are type annotations AND nested generics, so the risk should not be too high. But I wonder what could happen because of the missing types:
1) Missing error messages?
2) Wrong type inferences or overload resolution? Actually that would only be bad if 1) can happen
3) if 2) can happen, misleading error messages?
4) can NullPointerExceptions happen because something is not set in MissingTypeBindings?

> 
> I think we agree that all these are heuristics the incrementally help to
> make the compiler more resilient against this kind of problem, without ever
> promising that indirectly referenced class files can be made 100% irrelevant.

Yes. But even after both our patches there is room for improvement, see e.g. comment 22.

> 
> (In reply to Till Brychcy from comment #23)
> > [...] (i.e. by invoking
> > resolving PTB.enclosingType() instead of accessing PTB.enclosingType, so
> > resolving is triggered)
> 
> Actually, this exact field access looks strange to me, given that elsewhere
> you emphasize that this is now resolved on-demand. I'm sure you have good
> reasons, do you care to share the reasoning?

That place works fine with URB as generic type (and null as enclosing type), so it is better to avoid triggering resolving. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-26T21:20:31Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/137903 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=716dc3e8bf36c9398625bc368b0e0fde4379794d </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-27T19:35:16Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Gerrit change https://git.eclipse.org/r/139529 was merged to [master].
Commit: http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/commit/?id=b38c9e37927a5708f610bef4d6a255ce71a53468 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-27T19:38:39Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Stephan Herrmann from comment #25)
>[...] *If* you adopt
> my part, please file a follow-up ticket [...]

Done, see bug 545862. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-27T19:39:00Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Released for 4.12M1 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-03-28T08:39:32Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> This may be causing the test failures in JDT UI - bug 545878. </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-04-08T11:41:07Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> we have failing tests in our Xtext codebase with this change
bindings that were null are no longer

instead we get

bindings[0]
	 (org.eclipse.jdt.core.dom.TypeBinding) public class org.eclipse.xtext.xbase.lib.IterableExtensions
	extends Unresolved type java.lang.Object
/*   methods   */
[unresolved] public void <init>() 
[unresolved] public static Unresolved type java.lang.Iterable<T> operator_plus(Unresolved type java.lang.Iterable<? extends T>, Unresolved type java.lang.Iterable<? extends T>) 
[unresolved] public static T findFirst(Unresolved type java.lang.Iterable<T>, Unresolved type org.eclipse.xtext.xbase.lib.Functions$Function1<? super T,Unresolved type java.lang.Boolean>) 
[unresolved] public static T findLast(Unresolved type java.lang.Iterable<T>, Unresolved type org.eclipse.xtext.xbase.lib.Functions$Function1<? super T,Unresolved type java.lang.Boolean>) 
[unresolved]

@Stephan is this intended? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-04-08T12:53:00Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Christian Dietrich from comment #32)
> 	 (org.eclipse.jdt.core.dom.TypeBinding) public class
> org.eclipse.xtext.xbase.lib.IterableExtensions
> 	extends Unresolved type java.lang.Object
> /*   methods   */
> [unresolved] public void <init>() 
> [unresolved] public static Unresolved type java.lang.Iterable<T>
> operator_plus(Unresolved type java.lang.Iterable<? extends T>, Unresolved
> type java.lang.Iterable<? extends T>) 
> [unresolved] public static T findFirst(Unresolved type
> java.lang.Iterable<T>, Unresolved type
> org.eclipse.xtext.xbase.lib.Functions$Function1<? super T,Unresolved type
> java.lang.Boolean>) 
> [unresolved] public static T findLast(Unresolved type java.lang.Iterable<T>,
> Unresolved type org.eclipse.xtext.xbase.lib.Functions$Function1<? super
> T,Unresolved type java.lang.Boolean>) 
> [unresolved]
> 
> @Stephan is this intended?

I'm not Stephan, but seeing a nested generic types in the signature: We are now better at avoiding to resolve these until needed.
If they are missing from the classpath, you may be previously have seen an error where you now don't (if e.g. a class is used as method parameter in another class, without any usage of its own methods or fields) </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-04-08T12:57:13Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> in our case there is no jre on the classpath. so it might be relevant </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-04-08T14:31:20Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Christian Dietrich from comment #34)
> in our case there is no jre on the classpath. so it might be relevant

Are those negative tests?
Else: how is compilation supposed to work without any JRE? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-04-08T14:44:21Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> The problem is

Before null was returned 
Now bindings are returned 

How can we distinguish the good and bad case with the new behavior </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-04-08T14:52:01Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> Bindings for what? Can you show/link an example? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-04-08T15:23:26Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> the code we use to resolve bindings can be found here:

https://github.com/eclipse/xtext-eclipse/blob/24ff1fcfb7821f496346864ca6e32a99f931273b/org.eclipse.xtext.common.types.ui/src/org/eclipse/xtext/common/types/access/jdt/JdtBasedTypeFactory.java#L378

the bindings no longer return null (which we consider as "bad" usecase and throw illegalstate, which we test for)

the class we try to load is
the binary version of org.eclipse.xtext.xbase.lib.IterableExtensions
(https://github.com/eclipse/xtext-lib/blob/457104b6fb23c8b365eaf25a0acd8eae4a59221f/org.eclipse.xtext.xbase.lib/src/org/eclipse/xtext/xbase/lib/IterableExtensions.java)

the failing test is
https://github.com/eclipse/xtext-xtend/blob/5ffebf1fb29dc4d6c1e87b4a3db7a378ec20e8c6/org.eclipse.xtend.ide.tests/src/org/eclipse/xtend/ide/tests/buildpath/JavaClasspathTest.java#L45 </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-04-08T20:49:57Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> So you now don't get the exception with this stack trace:

	org.eclipse.jdt.internal.compiler.problem.AbortCompilation: Pb(324) The type java.lang.Object cannot be resolved. It is indirectly referenced from required .class files
at org.eclipse.jdt.internal.compiler.problem.ProblemHandler.handle(ProblemHandler.java:162)
	at org.eclipse.jdt.internal.compiler.problem.ProblemHandler.handle(ProblemHandler.java:229)
	at org.eclipse.jdt.internal.compiler.problem.ProblemReporter.handle(ProblemReporter.java:2562)
	at org.eclipse.jdt.internal.compiler.problem.ProblemReporter.isClassPathCorrect(ProblemReporter.java:5016)
	at org.eclipse.jdt.internal.compiler.lookup.UnresolvedReferenceBinding.resolve(UnresolvedReferenceBinding.java:123)
	at org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.resolveType(BinaryTypeBinding.java:231)
	at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.getType(LookupEnvironment.java:1697)
	at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.getResolvedType(LookupEnvironment.java:1614)
	at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.getResolvedJavaBaseType(LookupEnvironment.java:1626)
	at org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.initializeTypeVariable(BinaryTypeBinding.java:1416)
	at org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createTypeVariables(BinaryTypeBinding.java:1052)
	at org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createMethod(BinaryTypeBinding.java:845)
	at org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createMethods(BinaryTypeBinding.java:992)
	at org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.cachePartsFrom(BinaryTypeBinding.java:550)
	at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom(LookupEnvironment.java:1048)
	at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom(LookupEnvironment.java:1029)
	at org.eclipse.jdt.internal.compiler.Compiler.accept(Compiler.java:308)
	at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:255)
	at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.getType(LookupEnvironment.java:1690)
	at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.getType(LookupEnvironment.java:1659)
	at org.eclipse.jdt.internal.core.util.BindingKeyResolver.getCompilationUnitDeclaration(BindingKeyResolver.java:721)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.beginToCompile(CompilationUnitResolver.java:244)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.resolve(CompilationUnitResolver.java:894)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.resolve(CompilationUnitResolver.java:614)
	at org.eclipse.jdt.core.dom.CompilationUnitResolver.resolve(CompilationUnitResolver.java:832)
	at org.eclipse.jdt.core.dom.ASTParser.createBindings(ASTParser.java:1075)
	at org.eclipse.xtext.common.types.access.jdt.JdtBasedTypeFactory.resolveBindings(JdtBasedTypeFactory.java:395)
	at org.eclipse.xtext.common.types.access.jdt.JdtBasedTypeFactory.createType(JdtBasedTypeFactory.java:318)
	at org.eclipse.xtext.common.types.access.jdt.JdtBasedTypeFactory.createType(JdtBasedTypeFactory.java:414)
	at org.eclipse.xtext.common.types.access.jdt.JdtBasedTypeFactory.createType(JdtBasedTypeFactory.java:1)
	at org.eclipse.xtext.common.types.access.jdt.JdtTypeMirror.initialize(JdtTypeMirror.java:67)
	at org.eclipse.xtext.common.types.access.TypeResource.doLoad(TypeResource.java:134)
	at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1563)
	at org.eclipse.xtext.common.types.access.TypeResource.load(TypeResource.java:120)
	at org.eclipse.xtext.common.types.access.jdt.JdtTypeProvider.createResourceAndFindType(JdtTypeProvider.java:289)
	at org.eclipse.xtext.common.types.access.jdt.JdtTypeProvider.findObjectTypeInJavaProject(JdtTypeProvider.java:272)
	at org.eclipse.xtext.common.types.access.jdt.JdtTypeProvider.doFindObjectType(JdtTypeProvider.java:215)
	at org.eclipse.xtext.common.types.access.jdt.JdtTypeProvider.findObjectType(JdtTypeProvider.java:195)
	at org.eclipse.xtext.common.types.access.jdt.JdtTypeProvider.doFindTypeByName(JdtTypeProvider.java:153)
	at org.eclipse.xtext.common.types.access.jdt.JdtTypeProvider.findTypeByName(JdtTypeProvider.java:139)
	at org.eclipse.xtext.common.types.util.TypeReferences.findDeclaredType(TypeReferences.java:255)
	at org.eclipse.xtext.common.types.util.TypeReferences.findDeclaredType(TypeReferences.java:232)
	at org.eclipse.xtext.xbase.scoping.batch.ImplicitlyImportedFeatures.getTypes(ImplicitlyImportedFeatures.java:81)
	at org.eclipse.xtext.xbase.scoping.batch.ImplicitlyImportedFeatures.getExtensionClasses(ImplicitlyImportedFeatures.java:75)
	at org.eclipse.xtext.xbase.scoping.batch.XbaseBatchScopeProvider.newSession(XbaseBatchScopeProvider.java:120)
	at org.eclipse.xtext.xbase.typesystem.internal.DefaultReentrantTypeResolver.resolve(DefaultReentrantTypeResolver.java:163)
	at org.eclipse.xtext.xbase.typesystem.internal.DefaultReentrantTypeResolver.reentrantResolve(DefaultReentrantTypeResolver.java:139)
	at org.eclipse.xtext.xbase.typesystem.internal.CompoundReentrantTypeResolver.reentrantResolve(CompoundReentrantTypeResolver.java:79)
	at org.eclipse.xtext.xbase.typesystem.internal.CachingBatchTypeResolver$LazyResolvedTypes.resolveTypes(CachingBatchTypeResolver.java:80)
	at org.eclipse.xtext.xbase.typesystem.internal.CachingBatchTypeResolver$2.process(CachingBatchTypeResolver.java:57)
	at org.eclipse.xtext.xbase.typesystem.internal.CachingBatchTypeResolver$2.process(CachingBatchTypeResolver.java:53)
	at org.eclipse.xtext.util.concurrent.IUnitOfWork$Void.exec(IUnitOfWork.java:37)
	at org.eclipse.xtext.util.OnChangeEvictingCache.execWithoutCacheClear(OnChangeEvictingCache.java:128)
	at org.eclipse.xtext.xbase.typesystem.internal.CachingBatchTypeResolver.doResolveTypes(CachingBatchTypeResolver.java:53)
	at org.eclipse.xtext.xbase.typesystem.internal.AbstractBatchTypeResolver.resolveTypes(AbstractBatchTypeResolver.java:69)
	at org.eclipse.xtext.xbase.resource.BatchLinkingService.resolveBatched(BatchLinkingService.java:71)
	at org.eclipse.xtext.xbase.resource.BatchLinkableResource.resolveLazyCrossReferences(BatchLinkableResource.java:165)
	at org.eclipse.xtext.EcoreUtil2.resolveLazyCrossReferences(EcoreUtil2.java:504)
	at org.eclipse.xtext.builder.clustering.ClusteringBuilderState.doUpdate(ClusteringBuilderState.java:231)
	at org.eclipse.xtext.builder.builderState.AbstractBuilderState.update(AbstractBuilderState.java:116)
	at org.eclipse.xtext.builder.impl.XtextBuilder.doBuild(XtextBuilder.java:367)
	at org.eclipse.xtext.builder.impl.XtextBuilder.fullBuild(XtextBuilder.java:406)
	at org.eclipse.xtext.builder.impl.XtextBuilder.build(XtextBuilder.java:229)
	at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:833)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:220)
	at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:263)
	at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:316)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
	at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:319)
	at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:371)
	at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:392)
	at org.eclipse.core.internal.resources.Workspace.buildInternal(Workspace.java:504)
	at org.eclipse.core.internal.resources.Workspace.build(Workspace.java:404)
	at org.eclipse.xtext.ui.testing.util.IResourcesSetupUtil.waitForBuild(IResourcesSetupUtil.java:379)
	at org.eclipse.xtext.ui.testing.util.IResourcesSetupUtil.waitForBuild(IResourcesSetupUtil.java:356)
	at org.eclipse.xtend.ide.tests.buildpath.JavaClasspathTest$1$1.run(JavaClasspathTest.java:66)
	at org.eclipse.xtext.testing.logging.LoggingTester.captureLogging(LoggingTester.java:353)
	at org.eclipse.xtend.ide.tests.buildpath.JavaClasspathTest$1.run(JavaClasspathTest.java:50)
	at org.eclipse.xtext.testing.logging.LoggingTester.captureLogging(LoggingTester.java:353)
	at org.eclipse.xtend.ide.tests.buildpath.JavaClasspathTest.testNoJavaInClasspath(JavaClasspathTest.java:46) </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-04-08T20:54:58Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> So it is just accidentally detected that java.lang.Object is missing, because type variables are involved. I guess if the Class didn't contain any generic methods, you'd already get a type containing URB's before the patch.

I wonder when you actually want the class not to be resolved here. If you want to detect the case that java.lang.Object is missing, why not explicitly try to resolve it? </td> </tr>
        
        <tr>
            <td style="width: 20%; font-size: 12px; background-color:#d5e3c8"> Creation Time </td>
            <td style="width: 80%; font-size: 12px; background-color:#d5e3c8"> 2019-04-09T07:35:55Z </td>
        </tr>
        <tr> <td colspan="2" style="font-size: 12px; background-color:#f7fff0"> (In reply to Christian Dietrich from comment #36)
> The problem is
> 
> Before null was returned 
> Now bindings are returned 
> 
> How can we distinguish the good and bad case with the new behavior

If this is about DOM bindings (given you call ASTParser.createBindings()), and if those don't show the difference between resolved / unresolvable bindings: Have you tried TypeBinding#isRecovered()?
If that is not sufficient you may want to file a new RFE to improve the API of DOM bindings. </td> </tr>
        </table>
</body>
</html>
